<!DOCTYPE html>
<html b:render="false" b:version="2" class="v2" dir="ltr"><head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script async="" src="AR.Drone%20Development_fichiers/cbgapi.loaded_0"></script><script style="" type="text/javascript">(function() { var b=window,e="jstiming",g="tick";(function(){function d(a){this.t={};this.tick=function(a,d,c){c=void 0!=c?c:(new Date).getTime();this.t[a]=[c,d]};this[g]("start",null,a)}var a=new d;b.jstiming={Timer:d,load:a};if(b.performance&&b.performance.timing){var a=b.performance.timing,c=b[e].load,f=a.navigationStart,a=a.responseStart;0<f&&a>=f&&(c[g]("_wtsrt",void 0,f),c[g]("wtsrt_","_wtsrt",a),c[g]("tbsd_","wtsrt_"))}try{a=null,b.chrome&&b.chrome.csi&&(a=Math.floor(b.chrome.csi().pageT),c&&0<f&&(c[g]("_tbnd",void 0,b.chrome.csi().startE),
c[g]("tbnd_","_tbnd",f))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,c&&0<f&&(c[g]("_tbnd",void 0,b.external.startE),c[g]("tbnd_","_tbnd",f))),a&&(b[e].pt=a)}catch(l){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[e].load[g]("aft")};var h=!1;function k(){h||(h=!0,b[e].load[g]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",k,!1):b.attachEvent("onscroll",k);
 })();</script>
<meta content="blogger" name="generator">
<link href="http://ardrone-ailab-u-tokyo.blogspot.fr/favicon.ico" rel="icon" type="image/x-icon">
<link href="http://ardrone-ailab-u-tokyo.blogspot.com/" rel="canonical">
<link rel="alternate" type="application/atom+xml" title="AR.Drone Development - Atom" href="http://ardrone-ailab-u-tokyo.blogspot.com/feeds/posts/default">
<link rel="alternate" type="application/rss+xml" title="AR.Drone Development - RSS" href="http://ardrone-ailab-u-tokyo.blogspot.com/feeds/posts/default?alt=rss">
<link rel="service.post" type="application/atom+xml" title="AR.Drone Development - Atom" href="http://www.blogger.com/feeds/8726168038760046377/posts/default">
<link rel="openid.server" href="http://www.blogger.com/openid-server.g">
<link rel="openid.delegate" href="http://ardrone-ailab-u-tokyo.blogspot.com/">
<!--[if IE]><script type="text/javascript" src="//www.blogger.com/static/v1/jsbin/4041843765-ieretrofit.js"></script>
<![endif]-->
<meta content="C / C++ programming of AR.Drone API and OpenCV for UAV research" name="description">
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>AR.Drone Development</title>
<meta content="!" name="fragment">
<meta content="dynamic" name="blogger-template">
<meta content="IE=9,chrome=1" http-equiv="X-UA-Compatible">
<meta content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" name="viewport">
<link type="text/css" rel="stylesheet" href="AR.Drone%20Development_fichiers/2159474849-widget_css_2_bundle.css">
<link type="text/css" rel="stylesheet" href="AR.Drone%20Development_fichiers/authorization.css">


<script src="AR.Drone%20Development_fichiers/jquery.js" type="text/javascript"></script>
<script src="AR.Drone%20Development_fichiers/jquery-mousewheel.js" type="text/javascript"></script>
<script src="AR.Drone%20Development_fichiers/common.js" type="text/javascript"></script>
<script src="AR.Drone%20Development_fichiers/classic.js" type="text/javascript"></script>
<script src="AR.Drone%20Development_fichiers/gadgets.js" type="text/javascript"></script>
<script src="AR.Drone%20Development_fichiers/comments.js"></script>
<script type="text/javascript">var a=navigator,b="userAgent",c="indexOf",f="&m=1",g="(^|&)m=",h="?",k="?m=1";function l(){var d=window.location.href,e=d.split(h);switch(e.length){case 1:return d+k;case 2:return 0<=e[1].search(g)?null:d+f;default:return null}}if(-1!=a[b][c]("Mobile")&&-1!=a[b][c]("WebKit")&&-1==a[b][c]("iPad")||-1!=a[b][c]("Opera Mini")||-1!=a[b][c]("IEMobile")){var m=l();m&&window.location.replace(m)};
</script><script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script><style id="subscribecss" class="singleton-element">#subscribe {
  text-align: left;
  margin: 10px;
  vertical-align: middle;
  white-space: nowrap;
}

.subscribe-by-email,
.subscribe-rss-feed {
  min-width: 250px;
  padding: 4px 16px 16px 16px;
}

.subscribe-by-email {
  border-bottom: 1px solid #ddd;
}

.subscribe-by-email-title,
.subscribe-rss-feed-title {
  font-size: 16px;
  margin: 8px 0;
}

.subscribe-by-email-address {
  border: 1px solid #ddd;
  -moz-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
-ms-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
-o-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);
box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.3);;
  font-size: 12px;
  height: 27px;
  line-height: 27px;
  min-width: 192px;
  padding: 0 0 0 6px;
}

.subscribe-by-email-submit {
  display: inline-block;
  min-width: 54px;
  border: 1px solid #dcdcdc;
  text-align: center;
  color: #444;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  padding: 0 8px;
  line-height: 27px;
  -moz-border-radius: 2px;
-ms-border-radius: 2px;
-o-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
  -moz-transition: right 0.218s;
-ms-transition: right 0.218s;
-o-transition: right 0.218s;
-webkit-transition: right 0.218s;
transition: right 0.218s;;
  background-color: #f5f5f5;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f5f5f5),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -o-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: linear-gradient(top,#f5f5f5,#f1f1f1);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#f5f5f5',EndColorStr='#f1f1f1');
  -moz-box-sizing: content-box;
-ms-box-sizing: content-box;
-o-box-sizing: content-box;
-webkit-box-sizing: content-box;
box-sizing: content-box;;
}
.subscribe-by-email-submit:hover {
  border: 1px solid #c6c6c6;
  color: #222;
  -webkit-transition: all 0.0s;
  -moz-transition: all 0.0s;
  -o-transition: all 0.0s;
  transition: all 0.0s;
  background-color: #f8f8f8;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f8f8f8),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -o-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: linear-gradient(top,#f8f8f8,#f1f1f1);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#f8f8f8',EndColorStr='#f1f1f1');
  -moz-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-ms-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-o-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
box-shadow: 0px 1px 1px rgba(0,0,0,0.1);;
}
.subscribe-by-email-submit:active {
  background-color: #f6f6f6;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f6f6f6),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -o-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: linear-gradient(top,#f6f6f6,#f1f1f1);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#f6f6f6',EndColorStr='#f1f1f1');
  -moz-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-ms-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-o-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-webkit-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);;
}
.subscribe-by-email-submit:visited {
  color: #666;
}

.subscribe-rss-feed-view-rss {
  display: inline-block;
  height: 24px;
  line-height: 24px;
  padding-left: 28px;
}

.subscribe-rss-feed-add-to {
  /* http://www.google.com/images/icons/product/reader-16.png */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACfElEQVQ4T22TXUhTYRjH/0dn6pZNkkZa2rKrRMgshO4q6KbooqCbbrwqQhMsEPqAvsuK6KYuoroRQigogkxErMhMIqxZGNTWtjbSmcO5zfOx856vznlOmx3Zc3He8/7f5/k9H7wvh2XG3+gwLIml0tCEHJ3K8wvgY3MFz4aHj+FuauYsgT55ywcL3lp4MokCxAKwVBZsMQeFFyGlJbTFZ4sDKk7ehKowYrKJUagvn0CMW7AlgCIxtIamiwNcXVcoWNNUaLoKXeAhPLgLefw9VSAm01BlDb43g/BvauUcLaRudRu5PYcKLa30b4RugVQV2etXwY+8hpU9JyioHx82k+j2DMqvKTS4vOnZP47RtrgT6D9YAv54B5RIDKqqLwHKezUDhl402JBFGIwHFBmt610Y8A0hfOkO+RYqsLILPTKiKRVvf+noHdUQn5fJ6X+Atf99rgrRtt10VvduCKqmgbMAme5Fx+DufdRwZlCyIf8qsP5jZz1Ith+BFIw6AcN7g/BVV6ChpsqevDm4L/FFHHikIZMVCu0F/M+hTwQgfpgkgCQzu4JU1wIFBqILaFxTiapKF03+WSCNY09lsxXBdPRgZLKLYDWXL2Dd1ibMzCZsQLIzSVmpzKTdTq23jNZ99zP4FM7AUCTM3t4CZvrV+nyQcyLCP7+Dc50IGq/aFXJurqukNZKUsKGmzKyCYeAbw9G+adKVvl0QxSzc7lW0D4WmwJV2fjbmzleTMDUjYfNaO/NYMI0djW66LPWnY6R9PbWaVsbshNu27+QIMNXjJYE3Xx9XWgJPxQqM/cigzV9OesvFCK1G/37HzbU0+0EcfuG4ieS9zIoFWy5/AXxpdXGYm4ahAAAAAElFTkSuQmCC);
  background-repeat: no-repeat;
  background-position: 4px center;
  padding-left: 25px;
}

a.feed-reader-link {
  margin: .5em 0;
}

.subscribe-netvibes,
.subscribe-myyahoo {
  background-repeat: no-repeat;
  height: 17px;
  width: 91px;
}

.subscribe-netvibes {
  /* http://img1.blogblog.com/img/widgets/subscribe-netvibes.png */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAARCAMAAACFKyChAAAC7lBMVEX////////o8f9fti79/v/y9/+It/55rv5Fbrj8/f76+/33+v/z+P/q8//l7/+Cs/5rpv5dnf76/P9VmP74+vyUvv6Gtv56r/41oTVLcrqqqqr2+Pvv9f/h7f/e6//Y4fDL4P/R2+3F3P/C2v/N2OyqzP+2xuSix/5Ysy/5+//MzMxxqf5qpf6EntBno/5Zm/5fti9eti41ojQ1oTSSvf4+aLYsWa4iUqv5/P/4+fz0+f/29/v09vrx9Pro8v/r7/jm8P/g7P/j6fXa6f/e5fLU5f/T5P/a4vHV3u/J3//E2//L1uu+1/+51f+uzv+9y+atzv+6yeWoy/6myf+fxf6wweGcw/6awf6Nuv6gtNuJuP6EtP6CtP6As/6SqtV3rf51q/5tp/5mov5jof5env5bnP5ctS5ctC9btC9TsDBOrjFhg8NIqzI+pjM9pjM+pTM5pDRRdr1Mc7tIb7lBarcvkRg9Z7UrixgriRgqiRglghkxXbEifxkifRkgeRqQvP4ddhuuv+AyoDX+/v/2+f/2+Pzy9vvy9frt9P/w8/rs8//s7/fq7vfo7fbi7v/i7f/n7Pbg7f/k7Pnn6/bh7P/f7P/d6v/h6PTh5/Tf5vPY5//W5v/d5PLR5P/a4fHO4v/X4PDH3f/D2//C2v7C2f7M1+zM1+u/2P671/+61f+31P630/7Cz+ix0P+/zeawz/60xOOyw+KywuGawv6Zwv6rvd+YwP6XwP6Svv+httuLuf+Luf6Kuf6LuP6KuP6es9qbsdl+sv58r/6PptOFp9+JotKGoNCDndB9ms5enf50kspRlv5dtC5ctC5XszBYsi9TsTBTsC9oiMVPrjFPrjBjhcRJrDFJqzJFqjJFqTJCqTJDqDI/pzNApjNYfMA8pTQ7pDM5pDNWer84pDQ5ozQ5ozM4ozU3ozQ0ojU0oTRKcbpJcLpIcLkvkRcvjxgtjhgtjBg8ZbI6ZbQohhgohRk0YLIifxoifRooVq4aTKg1STZjAAAAAXRSTlMAQObYZgAAAmVJREFUeF611EOMbE0ch+H+tc2xbdu2bdv2XNu2bdu2bdv8uLsnmaRzchaTWUw/VUn9a/Puqmg2KkOj2UBFbHSINkYpDXr7I0NJC/3xVU6pbkhziB9A+11FZcW39vavVyuvvEc/TlgoR7oB9IstB9B+bmVl9R34QRwvQBIZpbsw0R+A7rYt3kBUx+lZM4OnM6fNFdP1WYAkRWAUCgIz3EgIQGi0KIhFbT+t7uruBjo7u24+Acnd3mdcj1pvGH9u+dQchkueP89wyiTWJ8uPpDlmABocjt3FQ0KI8m01i8NB1yzUVGygth/W/O67/VXzACQL3GvDdv4dotZqz+PbN6tN5R4fJ7YzRZKtng97OHCsPEZvaak52DnW2ChlbXJgebHXUNv36nr6bj1190Hi9yUZxu6zzTzOFxTY/78WLSOBTHWc2gq4EW3JPgApuQElB5LMzRVxYmlRhomA2r7z6J+hQ4AhQ/99fBsk41t3wMx9SqxHdnq6RXKgrzbRnmcbJxURbTcgLxOApSSoJDVm1cpoOs8gIbcsntq+0VjfOAwY1tBQXw2SGdy9PLMOw7Hcc8C6C/663Gw+mDmO+wF5VpbcS0NmIlgu2w6Nw3LQd09azfYZfZRNbV9787JpBOHt66brIHnl2Rsb+V/bZGPtNu1fZ/nMW54HgfWKCMBS4Ziw53I+p1SmLgA9T8pxUB+zWVZUaBdNbVd9cHUhlpaWi2sVSJYYrvBTW2bIx8TEXfMBBFqEAHIxDxAFz9ETGQgnmCxmArCOMNUHWAGhpnRQ23BmMJwYTs7EHtw3r9q/SlWINk1HZf4AwCDWutwHXcUAAAAASUVORK5CYII=);
}

.subscribe-myyahoo {
  /* http://img1.blogblog.com/img/widgets/subscribe-yahoo.png */
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAARCAMAAACFKyChAAAAe1BMVEX////8GSH///9UVFT+xcj/8PH8KzL+jZH/5eb9SlH/Zmb+19j+sbP8dnv9bnOjz//8PEP+n6KZmZn09PT9f4P9WmDU1NRmZmYNJppeXl7f398pXOZ0dHR+fn7q6ur/9vbMzMwPQtuJiYm0tLQAAJmpqakYMqUAM8xKc+0wAtJHAAAAAXRSTlMAQObYZgAAAXdJREFUeF6108eu2zAYhFHPsDd1ubfbkrz/E4bShQ3aSRYBrE+ACGhx8IMiV91irVYdF6rbZPvnY58vtX/lDofD29z2xfY07jY3rf+yvfcpGcWHLorFF2WtJS0Qn23Whf0hjuRanNZi1/MqvkhZAU6x9aMbJUkb8mM0BjJIaUnlkNOKgC3seWrW+XWzv4T44FGc2Imu3x05FQBJpdGkNgQaIJESVA1yLedxrYaFK/bkkEXOlfauE9nuN+Jd7DnXAjbCUAEjmdAa4xyhSUa4iSYtDNKTXdes67qw34Xoss1rXvkdBwCSDFqnya5G3zgJyRya73FHSB0L++1ve7I+bfrJ5lH0vDXT1KOHooYlBxggStngEoFUaUQalnb5L+/2+crZPgne0yBVg0hU0ulByqGKtnKjc4EMlfeDZQv/h517sMlne9CAdu1glATSpTiJ5dFUVSDu9o9t2WyfJ5rrM8n9/mbI7/7r7nw+9NJ7uUyzvVTZXm0W6zcSt0JtZ/HJvQAAAABJRU5ErkJggg==);
}</style><style id="blogarchivecss" class="singleton-element">.blogarchive-tree {
  padding: 12px;
  -moz-transition: width 0.15s, height 0.15s;
-ms-transition: width 0.15s, height 0.15s;
-o-transition: width 0.15s, height 0.15s;
-webkit-transition: width 0.15s, height 0.15s;
transition: width 0.15s, height 0.15s;
}

.blogarchive-title {
  padding: 8px;
  vertical-align: middle;
  line-height: 14px;
  white-space: nowrap;
  cursor: pointer;
}

.blogarchive-title:after {
  content: "";
  display: inline-block;
  border-width: 5px;
  border-color: transparent transparent transparent #666;
  border-style: solid;
  width: 0;
  height: 0;
  position: relative;
  left: 4px;
  visibility: hidden;
}

.blogarchive-title:hover:after {
  border-color: transparent transparent transparent #ccc;
}

.blogarchive-expanded > .blogarchive-title:after {
  border-color: transparent transparent transparent #666;
}

.blogarchive-title:hover:after,
.blogarchive-expanded > .blogarchive-title:after {
  visibility: visible;
}

.blogarchive-expanded > .blogarchive-title a {
  color: #666;
  font-weight: bold;
}

.blogarchive-flat .blogarchive-title:after {
  display: none;
}

.blogarchive-loading {
  background-image: url(data:image/gif;base64,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);
  background-repeat: no-repeat;
  background-position: left center;
  height: 28px;
}

.blogarchive-loading:after {
  content: "loading";
  color: #666;
  display: inline-block;
  line-height: 28px;
  margin-left: 28px;
  min-width: 192px;
}

.blogarchive-dates {
  min-width: 128px;
}

.blogarchive-tree > .blogarchive-dates {
  position: relative;
}

.blogarchive-date > .blogarchive-dates {
  display: none;
  position: absolute;
  top: 0;
  left: 90%;
  -moz-transition: left 0.15s ease-out;
-ms-transition: left 0.15s ease-out;
-o-transition: left 0.15s ease-out;
-webkit-transition: left 0.15s ease-out;
transition: left 0.15s ease-out;
}

.blogarchive-date.blogarchive-expanded > .blogarchive-dates {
  display: block;
  left: 100%;
}

.blogarchive-expanded > .blogarchive-dates {
  display: inline-block;
}

.blogarchive-post-count {
  color: #666;
  font-size: 12px;
}
.blogarchive-post-count:before {
  content: " (";
}
.blogarchive-post-count:after {
  content: ")";
}
.blogarchive-post {
  padding: 8px 0 0 16px;
  text-indent: -8px;
  min-width: 200px;
}

@media only screen and (max-width : 546px) {
  .blogarchive-tree {
    height: auto !important;
    width: auto !important;
  }

  .blogarchive-date > .blogarchive-dates {
    position: static;
    margin-left: 12px;
  }

  .blogarchive-post {
    padding: 4px 0 4px 16px;
  }
}</style><style id="profilecss" class="singleton-element">.profile {
  color: #666;
  min-width: 280px;
  padding: 8px 16px 16px 16px;
}

.profile-data {
  margin: 0;
}

.profile-name {
  display: inline-block;
}

.profile-name-link {
  background: no-repeat left center;
  display: inline-block;
  min-height: 20px;
  padding-left: 20px;
}

.profile-photo {
  display: inline-block;
  float: left;
  margin: 0 12px 10px 0;
}

.profile-name, .profile-location, .profile-occupation {
  font-size: 16px;
  margin-bottom: 6px;
}

.profile-photo img {
  vertical-align: middle;
}
.profile-aboutme {
  clear: both;
  line-height: 1.2em;
  margin: 0;
}

.profile-link {
  clear: both;
  display: block;
  margin-top: 4px;
  text-align: right;
}</style><style id="css">/* Begin: reset styles */

body,div,ul,ol,li,input,textarea,p,abbr {
  margin:0;
  outline: none;
  padding:0;
}
ol,ul {
  list-style:none;
}
h1,h2,h3,h4,h5,h6 {
  font-size: 100%;
  font-weight: normal;
  margin: 0;
  padding: 0;
}
img {
  border: none;
}

/* End: reset */

#chromefix {
  -webkit-transform: perspective(1); /* Chrome 12/13/14 flicker fix. */
}

body {
  background-color: rgba(238, 238, 238, 1);
  
  background-image: url(#EEEEEE none repeat scroll top left);
  background-position: left top;
  background-repeat: no-repeat;
  
  
}

body, input, textarea {
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 14px;
}

a,
a:focus {
  color: rgba(0, 158, 184, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  outline: none;
  text-decoration: none;
  -moz-transition: color .3s;
-ms-transition: color .3s;
-o-transition: color .3s;
-webkit-transition: color .3s;
transition: color .3s;
}

a:visited {
  color: rgba(0, 158, 184, 1);
}

a:hover {
  color: rgba(0, 158, 184, 1);
  text-decoration: underline;
}

abbr.published {
  outline: none;
  text-decoration: none;
  border: none;
}

.title {
  color: rgba(51, 51, 51, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 14px;
}

.title a {
  color: rgba(51, 51, 51, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

/* Way to prevent any css animations during dom manip. */
.instant, .instant * {
  -moz-transition: none !important;
-ms-transition: none !important;
-o-transition: none !important;
-webkit-transition: none !important;
transition: none !important;
  -moz-animation-iteration-count: 0 !important;
-ms-animation-iteration-count: 0 !important;
-o-animation-iteration-count: 0 !important;
-webkit-animation-iteration-count: 0 !important;
animation-iteration-count: 0 !important;
}

.adsense {
  margin: 0 auto;
  text-align: center;
}

/* Admin restricted links - obviously verified on server, but for easy templates. */

.blog-admin,
.item-control {
  display: none;
}

@media only screen and (min-width: 768px) and (max-width: 1024px) {
  .blog-admin,
  .item-control {
    margin-left: 14px;
  }
}

#injected-iframe {
  z-index: 9999 !important;
}



.kd-button {
  background-color: #f5f5f5;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f5f5f5),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -o-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: linear-gradient(top,#f5f5f5,#f1f1f1);
  border: 1px solid #DCDCDC;
  border: 1px solid rgba(0,0,0,0.1);
  -moz-border-radius: 2px;
-ms-border-radius: 2px;
-o-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
  -moz-box-sizing: content-box;
-ms-box-sizing: content-box;
-o-box-sizing: content-box;
-webkit-box-sizing: content-box;
box-sizing: content-box;
  color: #222;
  cursor:default;
  display: inline-block;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  line-height: 27px;
  min-width: 54px;
  padding: 0 8px;
  text-align: center;
  -moz-transition: all 0.218s;
-ms-transition: all 0.218s;
-o-transition: all 0.218s;
-webkit-transition: all 0.218s;
transition: all 0.218s;
  -moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
-webkit-user-select: none;
user-select: none;
}
.kd-button:hover {
  background-color: #f8f8f8;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f8f8f8),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: -o-linear-gradient(top,#f8f8f8,#f1f1f1);
  background-image: linear-gradient(top,#f8f8f8,#f1f1f1);
  border: 1px solid #C6C6C6;
  -moz-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-ms-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-o-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
box-shadow: 0px 1px 1px rgba(0,0,0,0.1);
  color: #222;
  -moz-transition: all 0.0s;
-ms-transition: all 0.0s;
-o-transition: all 0.0s;
-webkit-transition: all 0.0s;
transition: all 0.0s;
}
.kd-button:active {
  background-color: #f6f6f6;
  background-image: -webkit-gradient(linear,left top,left bottom,from(#f6f6f6),to(#f1f1f1));
  background-image: -webkit-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: -o-linear-gradient(top,#f6f6f6,#f1f1f1);
  background-image: linear-gradient(top,#f6f6f6,#f1f1f1);
  border: 1px solid #C6C6C6;
  -moz-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-ms-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-o-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-webkit-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
  color: #333;
}

.kd-button:focus, .kd-button.right:focus, .kd-button.left:focus{
  border: 1px solid #4d90fe;
  outline: none;
  z-index: 4 !important;
}

.kd-button.left {
  -moz-border-radius: 2px 0 0 2px;
-ms-border-radius: 2px 0 0 2px;
-o-border-radius: 2px 0 0 2px;
-webkit-border-radius: 2px 0 0 2px;
border-radius: 2px 0 0 2px;
  border-right-color: transparent;
  margin-right: 0;
}
.kd-button.left:hover {
  border-right: 1px solid #c6c6c6;
}
.kd-button.right {
  -moz-border-radius: 0 2px 2px 0;
-ms-border-radius: 0 2px 2px 0;
-o-border-radius: 0 2px 2px 0;
-webkit-border-radius: 0 2px 2px 0;
border-radius: 0 2px 2px 0;
  margin-left:-5px;
}

.kd-button.right:hover {
  border-left: 1px solid #c6c6c6;
}
.kd-button img {
  display: inline-block;
  margin: -3px 0 0;
  *margin:4px 0 0; /*IE7*/
  opacity: 0.55;
  vertical-align: middle;
}

.kd-button.selected img {
  opacity: 0.9;
}
.kd-button:hover img {
  opacity: 0.72;
}
.kd-button:active img {
  opacity: 1.0;
}
/*disabled buttons*/
.kd-button.disabled,
.kd-button.disabled:hover,
.kd-button.disabled:active {
  background: #FFF;
  border: 1px solid #f3f3f3;
  border: 1px solid rgba(0,0,0,0.05);
  color: #b8b8b8;
  cursor: default;
  pointer-events: none;
}
.kd-button.disabled:active{
  -moz-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-ms-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-o-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
-webkit-box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
box-shadow: inset 0px 1px 2px rgba(0,0,0,0.1);
}
.kd-button.disabled img {
  opacity: 0.5;
}
.kd-button.small {
  min-width: 36px;
  padding: 0;
  width: 36px;
}



.ribbon {
  color: #eee;
  cursor: default;
  display: inline-block;
  text-align: center;
  width: 35px;
}
a.ribbon {
  color: #eee;
  cursor: pointer;
  text-decoration: none;
}

.ribbon .ribbon-piece {
  background-color: rgba(102, 102, 102, 1);
  -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
  -moz-transition: background-color 0.5s ease-in;
-ms-transition: background-color 0.5s ease-in;
-o-transition: background-color 0.5s ease-in;
-webkit-transition: background-color 0.5s ease-in;
transition: background-color 0.5s ease-in;
}

/* On hover color change. */
a.ribbon:hover .ribbon-piece {
  background-color: rgba(173, 58, 43, 1);
  color: #eee;
}

.ribbon .top {
  border-bottom: solid 1px rgba(255, 255, 255, 0.6);
  -moz-border-radius: 1px 1px 0px 0px;
-ms-border-radius: 1px 1px 0px 0px;
-o-border-radius: 1px 1px 0px 0px;
-webkit-border-radius: 1px 1px 0px 0px;
border-radius: 1px 1px 0px 0px;
  font-size: 11px;
  padding: 4px 0;
  position: relative;
  text-transform: uppercase;
}

.ribbon .bottom {
  font-size: 17px;
  padding: 5px 0;
}

.ribbon .tail {
  height: 10px;
  overflow: hidden;
  position: relative;
}

.ribbon .tail .left,
.ribbon .tail .right {
  height: 10px;
  position: absolute;
  top: -10px;
  width: 50px;
}

.ribbon .tail .left{
  left: -9px;
  -moz-transform: rotate(-25deg);
-ms-transform: rotate(-25deg);
-o-transform: rotate(-25deg);
-webkit-transform: rotate(-25deg);
transform: rotate(-25deg);
}

.ribbon .tail .right{
  right: -9px;
  -moz-transform: rotate(25deg);
-ms-transform: rotate(25deg);
-o-transform: rotate(25deg);
-webkit-transform: rotate(25deg);
transform: rotate(25deg);
}

/* Do this with a transform? */
.ribbon.small {
  width: 25px;
}
.ribbon.small .top {
  font-size: 9px;
  padding: 2px 0;
}
.ribbon.small .bottom {
  font-size: 12px;
  padding: 3px 0;
}
.ribbon.small .tail {
  height: 6px;
}
.ribbon.small .tail .left,
.ribbon.small .tail .right {
  height: 6px;
  top: -7px;
  width: 40px;
}
.ribbon.small .tail .left {
  left: -6px;
}
.ribbon.small .tail .right {
  right: -6px;
}




.bubble {
  background-color: rgba(102, 102, 102, 1);
  background-position: center center;
  border-radius: 3px;
  border: solid 1px rgba(102, 102, 102, 1);
  color: white;
  cursor: default;
  display: inline-block;
  font-size: 12px;
  padding: 2px 0;
  position: relative;
  text-align: center;
  -moz-transition-property: background-color, border-color;
-ms-transition-property: background-color, border-color;
-o-transition-property: background-color, border-color;
-webkit-transition-property: background-color, border-color;
transition-property: background-color, border-color;
  -moz-transition-duration: 0.5s;
-ms-transition-duration: 0.5s;
-o-transition-duration: 0.5s;
-webkit-transition-duration: 0.5s;
transition-duration: 0.5s;
  -moz-transition-timing-function: ease-in;
-ms-transition-timing-function: ease-in;
-o-transition-timing-function: ease-in;
-webkit-transition-timing-function: ease-in;
transition-timing-function: ease-in;
  width: 26px;
}

.bubble.light {
  background-color: rgba(217, 217, 217, 1);
  border-color: rgba(217, 217, 217, 1);
}

.bubble.empty {
  color: rgba(102, 102, 102, 1);
  border: solid 1px rgba(153, 153, 153, 1);
  -moz-box-shadow: none;
-ms-box-shadow: none;
-o-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
  background-color: white;
}

.bubble .bubble-tail,
.bubble.empty .bubble-tail:after {
  border-color: rgba(102, 102, 102, 1) transparent transparent transparent;
  border-style:solid;
  border-width: 5px;
  bottom: -10px;
  content: '';
  height: 0;
  left: 50%;
  margin-left: -5px;
  position: absolute;
  -moz-transition: border-color 0.5s ease-in;
-ms-transition: border-color 0.5s ease-in;
-o-transition: border-color 0.5s ease-in;
-webkit-transition: border-color 0.5s ease-in;
transition: border-color 0.5s ease-in;
  width: 0;
}

.bubble.light .bubble-tail {
  border-color: rgba(217, 217, 217, 1) transparent transparent transparent;
}

.bubble.empty .bubble-tail {
  border-color: rgba(153, 153, 153, 1) transparent transparent transparent;
}

.bubble.empty .bubble-tail:after {
  left: 0;
  top: -6px;
  border-color: white transparent transparent transparent;
}

/* On hover color change.
.bubble:hover {
  background-color: #d14836;
  border-color: #d14836;
}

.bubble.empty:hover {
  /*background-color: white;
  border-color: #d14836;
  color: #d14836;
}

.bubble:hover .bubble-tail {
  border-color: #d14836 transparent transparent transparent !important;
}
*/




body.loading #loading {
  opacity: 0.75;
  margin-bottom: 0;
}

#loading {
  background-color: #000;
  border-radius: 6px 6px 0px 0px;
  border: solid 1px #666;
  border-bottom: none;
  bottom: 0;
  box-shadow: 0 0 4px #333;
  color: white;
  font-size: 18px;
  left: 50%;
  margin-bottom: -50px;
  margin-left: -60px;
  opacity: 0;
  padding: 5px 0px;
  position: fixed;
  text-align: center;
  -moz-transition: opacity 0.5s, margin-bottom 0.5s;
-ms-transition: opacity 0.5s, margin-bottom 0.5s;
-o-transition: opacity 0.5s, margin-bottom 0.5s;
-webkit-transition: opacity 0.5s, margin-bottom 0.5s;
transition: opacity 0.5s, margin-bottom 0.5s;
  -moz-transition-delay: 279ms;
-ms-transition-delay: 279ms;
-o-transition-delay: 279ms;
-webkit-transition-delay: 279ms;
transition-delay: 279ms;
  width: 120px;
  z-index: 999;
}

#loading span {
  background-repeat: no-repeat;
  background-position: right center;
  background-image: url(data:image/gif;base64,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);
  display: inline-block;
  height: 30px;
  line-height: 30px;
  padding-right: 30px;
}

#loading span:after {
  content: '...';
}

.blogger-gear {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/gif;base64,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);
  display: inline-block;
  height: 95px;
  width: 95px;
}



#message {
  position: fixed;
  text-align: center;
  top: 40%;
  width: 100%;
}
#message span {
  background-color: white;
  border-radius: 6px;
  color: #333;
  box-shadow: 0 0 4px #666;
  display: inline-block;
  font-family: arial;
  font-size: 16px;
  padding: 15px;
  white-space: no-wrap;
}


.feedback {
  background-color: whiteSmoke;
  background-image: -webkit-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -moz-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -ms-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: -o-linear-gradient(top,#f5f5f5,#f1f1f1);
  background-image: linear-gradient(top,#f5f5f5,#f1f1f1);
  border: 1px solid gainsboro;
  border: 1px solid rgba(0, 0, 0, 0.1);
  -moz-border-radius: 2px;
-ms-border-radius: 2px;
-o-border-radius: 2px;
-webkit-border-radius: 2px;
border-radius: 2px;
  bottom: -1px;
  -moz-box-shadow: 0 0 6px #808080;
-ms-box-shadow: 0 0 6px #808080;
-o-box-shadow: 0 0 6px #808080;
-webkit-box-shadow: 0 0 6px #808080;
box-shadow: 0 0 6px #808080;
  color: #444;
  cursor: default;
  display: inline-block;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  line-height: 27px;
  margin-right: 0px;
  min-width: 54px;
  outline: 0;
  padding: 0 8px;
  position: fixed;
  right: -1px;
  text-align: center;
  text-decoration: none;
  z-index: 10001;
}
.feedback:hover, .feedback:active, .feedback:visited, .feedback:focus {
  color: #444;
  text-decoration: none;
}
.feedback:active, .feedback:focus {
  border-color: #4d90fe;
}



.quick-search {
  background-color: white;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -moz-border-radius: 5px;
-ms-border-radius: 5px;
-o-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
  -moz-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  padding: 5px;
  width: 450px;
  z-index: 10001;
}

.quick-search li {
  cursor: pointer;
}

.quick-search .result {
  border: solid 1px transparent;
  clear: both;
  font-size: 13px;
  height: 48px;
  margin: -1px;
  overflow: hidden;
  padding: 7px;
  position: relative;
}

.quick-search .title {
  display: inline-block;
  font-size: 15px;
  left: 60px;
  overflow: hidden;
  position: absolute;
  right: 130px;
  text-overflow: ellipsis;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
  top: 5px;
  white-space: nowrap;
}

.quick-search .date {
  color: #dd4b39;
  font-size: 15px;
  margin-left: 5px;
  position: absolute;
  right: 5px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
  top: 5px;
}

.quick-search .snippet {
  color: #888;
  left: 60px;
  line-height: 1.25;
  max-height: 35px;
  overflow: hidden;
  position: absolute;
  right: 5px;
  text-align: justify;
  top: 24px;
}

.quick-search .thumbnail {
  -moz-border-radius: 5px;
-ms-border-radius: 5px;
-o-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  left: 5px;
  margin-right: 7px;
  position: absolute;
  top: 5px;
}

.quick-search .result:hover,
.quick-search .result.active {
  background-color: #f9edbe;
  border: solid 1px #f0c36d;
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.quick-search .result:hover .snippet,
.quick-search .result.active .snippet {
  color: #333;
}

.quick-search .result .term {
  background-color: #f9edbe;
  color: black;
}

.quick-search .result:hover .term,
.quick-search .result:active .term {
  background-color: transparent;
}

.quick-search .server {
  border: solid 1px transparent;
  margin: -1px;
  padding: 10px;
  text-align: center;
}

.quick-search li + .server {
  border-top: solid 1px #ddd;
}

.quick-search .server:hover,
.quick-search .server.active {
  background-color: #eaeaea;
  border: solid 1px #ccc;
  -moz-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-o-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.quick-search .message {
  color: #4d90fe;
  display: block;
  font-size: 16px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
}

.quick-search .search_query {
  color: black;
}

.quick-search .count {
  color: #222;
  display: block;
  font-size: 14px;
}

#search.searching {
  background-image: url(data:image/gif;base64,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);
  background-position: center right;
  background-repeat: no-repeat;
  -moz-transition: none;
-ms-transition: none;
-o-transition: none;
-webkit-transition: none;
transition: none;
}



@media print {
  /* Printing on white is cleaner. */
  .article {
    background-color: white !important;
    margin: 0 !important;
  }
  .article img {
    border: none !important;
    box-shadow: none !important;
  }

  .ribbon.date .ribbon-piece {
    display: none;
  }
  .ribbon.date {
    display: inline-block;
    height: 100%;
    margin: 0 !important;
    padding: 0;
    position: static !important;
    top: 0;
    white-space: nowrap;
    width: auto;
  }
  .ribbon.date:after{
    content: attr(title);
    color: rgba(51, 51, 51, 1);
    font-size: 20px;
  }

  /* Include the links to all anchors */
  .article-content a:after {
    content: " [" attr(href) "] ";
    font-size: 90%;
  }

  /* Fix printing for the viewitem --------------------------------- */

  /* Hide lots of things. */
  .overview-open > *,
  .overview-backdrop,
  .overview-header,
  .share-controls,
  .adsense-aside,
  .adsense-aside {
    display: none !important;
  }

   /* Show the main content. */
  .overview-open > #overview {
    display: block !important;
  }

   /* Reset colors, padding, and positions. */
  body.overview-open,
  .overview-panel,
  .overview-wrap,
  .overview-inner,
  .overview-content {
    background-color: white !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    overflow: visible !important;
    padding: 0 !important;
    position: static !important;
  }
   /* Ensure content positioned - but keep padding. */
  .overview-panel .overview-content {
    position: static !important;
  }

  /* Fix printing for the viewitem --------------------------------- */

  /* Hide lots of things. */
  .viewitem-open > *,
  .viewitem-background,
  .viewitem-header,
  .share-controls {
    display: none !important;
  }

   /* Show the main content. */
  .viewitem-open > .viewitem-panel {
    display: block !important;
  }

   /* Reset colors, padding, and positions. */
  body.viewitem-open,
  .viewitem-panel,
  .viewitem-wrap,
  .viewitem-inner,
  .viewitem-content {
    background-color: white !important;
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    overflow: visible !important;
    padding: 0 !important;
    position: static !important;
  }

   /* Ensure content positioned - but keep padding. */
  .viewitem-panel .viewitem-content {
    position: static !important;
  }

  /* View specific (eg Sidebar and Mosaic) fixes should go elsewhere */
}





#header-container {
  height: 105px;
}

#header {
  
  left: 0;
  position: fixed;
  top: 0;
  
  width: 100%;
  z-index: 1000;
}

#header .header-bar {
   /* No custom image, put slight gradient. */
  background-image: -moz-linear-gradient(
      center top,
      rgba(255, 255, 255, 0.1),
      rgba(100, 100, 100, 0.05)
  );
  background-image: -webkit-gradient(
      linear,
      left top,
      left bottom,
      from(rgba(255, 255, 255, 0.3)),
      to(rgba(255, 255, 255, 0.05))
  );
  
  
  
  background-attachment: scroll; /* Chrome, really? */
  background-color: rgba(243, 243, 243, 1);
  -moz-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
-ms-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
-o-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
box-shadow: 0 0 5px 0px rgba(0, 0, 0, 0.3);
  height: 65px;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1001;
}

#header .header-bar .title {
  display: block;
  height: 65px;
  line-height: 65px;
  margin-left: 20px;
  margin-right: 235px;
  overflow: hidden;
  text-decoration: none;
  text-overflow: ellipsis;
  white-space: nowrap;
}

#header .header-bar .title h1,
#header .header-bar .title h3 {
  display: inline;
  height: 65px;
  
  text-shadow: 1px 1px 1px rgba(255, 255, 255, 0.3);
  
  white-space: nowrap;
}

#header .header-bar .title h1 {
  color: rgba(85, 85, 85, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 28px;
}

#header .header-bar .title h3 {
  color: rgba(85, 85, 85, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 20px;
  margin-left: 5px;
}

#header input#search {
  background-color: #fafafa;
  -moz-border-radius: 3px;
-ms-border-radius: 3px;
-o-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
  border: none;
  -moz-box-shadow: inset 1px 1px 2px #bbb;
-ms-box-shadow: inset 1px 1px 2px #bbb;
-o-box-shadow: inset 1px 1px 2px #bbb;
-webkit-box-shadow: inset 1px 1px 2px #bbb;
box-shadow: inset 1px 1px 2px #bbb;
  font-size: 15px;
  height: 30px;
  margin: 0;
  padding: 0px 7px;
  right: 10px;
  text-align: left;
  text-transform: lowercase;
  top: 18px;
  -moz-transition: background-color 0.3s ease-in-out;
-ms-transition: background-color 0.3s ease-in-out;
-o-transition: background-color 0.3s ease-in-out;
-webkit-transition: background-color 0.3s ease-in-out;
transition: background-color 0.3s ease-in-out;;
  width: 200px;
  position: absolute;
}

#header input#search:focus {
  background-color: white;
}

#header .header-drawer {
  /* the drawer scrolls with the page initially, then gets fixed (.sticky) */
  background-color: rgba(51, 51, 51, 1);
  -moz-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
-ms-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
-o-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
-webkit-box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);
box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  height: 35px;
  margin-top: 31px; /* use margin to match back to un-scrolled */
  position: absolute;
  top: 34px; /* top here must match top when sticky */
  width: 100%;
  z-index: 1000;
}


#header .header-drawer.sticky {
  margin-top: 0px;
  top: 34px; /* now stuck, just peeking out from the top */
  -moz-transition: top 0.2s linear;
-ms-transition: top 0.2s linear;
-o-transition: top 0.2s linear;
-webkit-transition: top 0.2s linear;
transition: top 0.2s linear;
  -moz-transition-delay: 0.3s;
-ms-transition-delay: 0.3s;
-o-transition-delay: 0.3s;
-webkit-transition-delay: 0.3s;
transition-delay: 0.3s; /* don't surprise on quick hover */
}

#header:hover .header-drawer,
#header .header-drawer.open {
  margin-top: 0px;
  top: 65px; /* animate back down to full unscrolled height */
}


/* Views and Pages */

#header #views {
  float: left;
  position: relative;
  z-index: 999;
}

#header .menu .menu-item,
#header .menu .menu-heading {
  border-radius: 4px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  color: rgba(255, 255, 255, 1);
  cursor: pointer;
  display: inline-block;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 15px;
  font-weight: 100;
  line-height: 30px;
  height: 30px;
  padding-left: 15px;
  padding-right: 15px;
  text-shadow: -1px -1px rgba(0, 0, 0, 0.1); /* subtle inset */
  -moz-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
-ms-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
-o-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
-webkit-transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
  -moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
-webkit-user-select: none;
user-select: none;;
  width: 100%;
}

#header a.menu-item {
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
}

#views .menu-item {
  text-transform: capitalize;
}

#header .menu .menu-heading {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 35px;
  line-height: 35px;
  margin-right: 15px;
  position: relative;
  width: auto;
}

#header .indicator {
  /* instead of using a .heading::after actually put this in as elements
     which will allow us to animate it rotating! */
  border-color: rgba(255, 255, 255, 1) transparent transparent transparent;
  border-style: solid;
  border-width: 5px;
  height: 0px;
  margin: 0;
  margin-top: -1px;
  overflow: visible;
  padding: 0;
  position: absolute;
  right: 0;
  top: 50%;
  -moz-transition: all .3s linear;
-ms-transition: all .3s linear;
-o-transition: all .3s linear;
-webkit-transition: all .3s linear;
transition: all .3s linear;
  -moz-transform-origin: center 2px;
-ms-transform-origin: center 2px;
-o-transform-origin: center 2px;
-webkit-transform-origin: center 2px;
transform-origin: center 2px;
}

#header .menu:hover .indicator {
  -moz-transform: rotate(180deg);
-ms-transform: rotate(180deg);
-o-transform: rotate(180deg);
-webkit-transform: rotate(180deg);
transform: rotate(180deg);
}

#header .menu ul {
  -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
-ms-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
-o-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
-webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
  max-height: 0px;
  overflow: hidden;
  padding: 0;
  -moz-transition: all 0.3s linear;
-ms-transition: all 0.3s linear;
-o-transition: all 0.3s linear;
-webkit-transition: all 0.3s linear;
transition: all 0.3s linear;
  visibility: hidden;
  width: 100%;

}

#header .menu:hover ul {
  max-height: 500px;
  opacity: 1;
  -moz-transition: all 0.6s linear;
-ms-transition: all 0.6s linear;
-o-transition: all 0.6s linear;
-webkit-transition: all 0.6s linear;
transition: all 0.6s linear; /* show slower than hide */
  visibility: visible;
}

#header .menu li {
  display: list-item;
  margin: 0;
  overflow: hidden;
  padding: 0;
  position: relative;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 100%;
}

#header .menu li a {
  opacity: 0.99; /* Chrome12+ has different subpixel anti-aliasing rules, this looks worse, but prevents flicker. */
}

#header .menu .menu-background {
  background-color: rgba(51, 51, 51, 1);
  height: 100%;
  left: 0;
  opacity: 0.75;
  position: absolute;
  top: 0;
  -moz-transition: opacity 0.3s ease-in;
-ms-transition: opacity 0.3s ease-in;
-o-transition: opacity 0.3s ease-in;
-webkit-transition: opacity 0.3s ease-in;
transition: opacity 0.3s ease-in;
  width: 100%;
  z-index: -1; /* Negative isn't great... but otherwise the a needs to be positioned. */
}

#header .menu li:hover .menu-background {
  opacity: 0.95;
}

#header .menu li {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
}

#header .tabs li {
  display: inline;
  height: 35px;
  line-height: 35px;
  margin-left: 10px;
}

#header .tags li .menu-background {
  display: none;
}

#header .tabs li .menu-item {
  color: rgba(255, 255, 255, 0.6);
  -moz-transition: color 286ms ease-in;
-ms-transition: color 286ms ease-in;
-o-transition: color 286ms ease-in;
-webkit-transition: color 286ms ease-in;
transition: color 286ms ease-in;
}

#header .tabs li .menu-item:hover,
#header .menu li .menu-item:hover,
#header .tabs li .menu-item.current {
  color: rgba(255, 255, 255, 1) !important;
}

#header .tabs .menu-heading {
  display: none;
}

#header #pages {
  float: left;
  margin-left: 0px;
  position: relative;
}

#header #pages:before {
  border-left: solid 1px rgba(255, 255, 255, 1);
  content: '';
  height: 20px;
  left: 0px;
  opacity: 0.5;
  position: absolute;
  top: 8px;
  z-index: 1000;
}

#header #pages.tabs ul {
  margin-left: 0px;
  overflow: hidden;
  white-space: nowrap;
}

#header .admin-controls {
  height: 35px;
  position: absolute;
  right: 10px;
  top: 0px;
}

#header .admin-controls .dashboard {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAANCAYAAAB2HjRBAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAVdEVYdENyZWF0aW9uIFRpbWUAMTEvNy8xMZe/cygAAADVSURBVCiRpZG9agJBFEbPxB/E1mCTV4iFldW+hZWIRdqAr2EtIX2a9Ja24jPoE1gKWqmIyUnhqqvuqpDTzB34Dtz5BjJQG+pMbak1deeeroqaKUbqNA7P1b66vSurzUQwjaP8dCG2gW+gkPUcYHcYjrL6BnwBxRsiwCuQP0gFtXdjzTQGahX1Q/1RNw+KK/VXHQY1ApZABHzeWRngHRgBlXwIYRyvX0l2ByyADZADnuMTYApMzgoDyol5DXRCCC9AHZin5c6+KkHg1Hopvl+RJT/Ev+Q/DML6Kx8BC7sAAAAASUVORK5CYII=);
  /*background-size: 18px 18px;*/
  display: block;
  height: 35px;
  opacity: 0.8;
  position: absolute;
  right: 0px;
  top: 0;
  width: 18px;
}

#header .admin-controls .new-post {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAAVdEVYdENyZWF0aW9uIFRpbWUAMTEvNy8xMZe/cygAAADaSURBVCiRhdIxS0JRGMbx/z1a0KdwcyxttcXRLxBIEFgOfp0W5yAn56DNxUm3oiXItUmEgmwo/Dd4g+7p3HzW8/w45305sCNqW31QB2pQd4K6euc2C7WjVv8Dh+rcYl7Us0oJaAA3QDM6CsBTCjTVR/9mqXbV/RgclYA39TTvFMBxvqU4a/X8V68w9HMCfKiX0WtA3VOv8tImAheJmUGtqSO1pQ5z8K72SjZLAE6AT2ANtIAV0FevUwggU2fAAXALLIGJeh9CSP4XlSowBqbAAnjNsuyr7IaffAOehB+C7e2WDgAAAABJRU5ErkJggg==);
  /*background-size: 18px 18px;*/
  display: block;
  height: 35px;
  opacity: 0.8;
  position: absolute;
  right: 24px;
  top: 0;
  width: 18px;
}

#header .admin-controls .dashboard:hover,
#header .admin-controls .new-post:hover {
  opacity: 1;
}

#header #follow-author {
  height: 65px;
  right: 0px;
  overflow: hidden;
  position: absolute;
  top: 0;
  width: 300px;
}






body.overview-open,
body.lightbox-open {
  overflow: hidden;
}

/* overview background. */
#overview .overview-backdrop,
#lightbox .lightbox-backdrop {
  background-color: black;
  bottom: 0;
  left: 0;
  opacity: 0;
  pointer-events: none;
  position: fixed;
  right: 0;
  top: 0;
  -moz-transition: all 1004ms ease-in;
-ms-transition: all 1004ms ease-in;
-o-transition: all 1004ms ease-in;
-webkit-transition: all 1004ms ease-in;
transition: all 1004ms ease-in;
  z-index: 9990;
}

#overview.open .overview-backdrop,
#lightbox.open .lightbox-backdrop {
  opacity: 0.7;
}

#overview.closing .overview-backdrop,
#lightbox.closing .lightbox-backdrop {
  opacity: 0;
  -moz-transition: opacity 0.5s;
-ms-transition: opacity 0.5s;
-o-transition: opacity 0.5s;
-webkit-transition: opacity 0.5s;
transition: opacity 0.5s;
}

.overview-panel,
.lightbox-panel {
  bottom: 0;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  left: 20px;
  pointer-events: none;
  position: fixed;
  right: 20px;
  top: 50px;
  -moz-transition: all 1009ms ease-in-out;
-ms-transition: all 1009ms ease-in-out;
-o-transition: all 1009ms ease-in-out;
-webkit-transition: all 1009ms ease-in-out;
transition: all 1009ms ease-in-out;
  z-index: 9999; /* Way up in the air. */
}

.lightbox-title {
  bottom: 0;
  display: table-cell;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 20px;
  height: 100%;
  left: 60px;
  line-height: 50px;
  overflow: hidden;
  position: absolute;
  right: 60px;
  text-align: center;
  text-overflow: ellipsis;
  top: 0;
  white-space: nowrap;
}

.lightbox-contentwrap {
  font-size: 14px;
  margin: 0 auto;
  max-width: 750px;
}

#overview.closing .overview-panel,
#lightbox.closing .lightbox-panel {
  opacity: 0;
  -moz-transition: opacity 0.5s;
-ms-transition: opacity 0.5s;
-o-transition: opacity 0.5s;
-webkit-transition: opacity 0.5s;
transition: opacity 0.5s;
}

/* Bounding box of our overview item. */
.overview-panel .overview-wrap,
.lightbox-panel .lightbox-wrap {
  background-color: transparent;
  -moz-border-radius: 6px 6px 0px 0px;
-ms-border-radius: 6px 6px 0px 0px;
-o-border-radius: 6px 6px 0px 0px;
-webkit-border-radius: 6px 6px 0px 0px;
border-radius: 6px 6px 0px 0px;
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABTUlEQVRIx+2W3WrDMAyF47hJWzrY+z/mYKNtnNhLxlE5PZNhN3NuahB24qDP+nMUOn8EmW1dVony7UJ7NorMvxTXQKa87/42Mh3CBasFJhEQftdVTq17JhlgfvdkUQBkgx2wLhX3eoOtCQDOgGaDsrIeoIFcGARYHPdmiWGh9baXAM4GNDFYJKW9424PWBxQR2416BNwBJBdG5xYDgJMTuyKuHL7ZjIgxy2SmIs1iUYBTk6SzPRs8hNPBg4OLALQk7VnAV7JkowDLA40MXCgzIxk8QAZqS4vAvyiupugOFGGLpSxKZBydekBIAMfsX4T4CeU3Qk0CdAsntXCSO5l4DafVnmvxPBjlRuBbE4CTIHqji01i44AnRC7c6Xor5Ab5C4WPy6AF/BfgM2TZteyaFL4u1xtTS/v5r+n5j/g5i3GLk1U8zZxl0a4Sav/DRDkGFoKi/1vAAAAAElFTkSuQmCC) 12 / 12px repeat;
  -moz-box-sizing: content-box;
-ms-box-sizing: content-box;
-o-box-sizing: content-box;
-webkit-box-sizing: content-box;
box-sizing: content-box;
  background-clip: padding-box;
  top: -12px;
  
  height: 100%;
  left: 0;
  margin: 0 auto;
  max-width: 1000px;
  overflow: hidden;
  padding: 0px 1px; /* The controls the inset of the overview-inner. */
  pointer-events: auto;
  position: relative;
  -moz-transition: left 0.5s linear;
-ms-transition: left 0.5s linear;
-o-transition: left 0.5s linear;
-webkit-transition: left 0.5s linear;
transition: left 0.5s linear;
  z-index: 9999;
}

.overview-panel.left .overview-wrap {
  left: -110%;
}

.overview-panel.right .overview-wrap {
  left: 110%;
}

/* This is the box that things can be draw in. */
.overview-panel .overview-inner,
.lightbox-panel .lightbox-inner {
  background-color: #fafafa;
  -moz-border-radius: 6px 6px 0px 0px;
-ms-border-radius: 6px 6px 0px 0px;
-o-border-radius: 6px 6px 0px 0px;
-webkit-border-radius: 6px 6px 0px 0px;
border-radius: 6px 6px 0px 0px;
  bottom: 0px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 100%;
  position: relative;
  width: 100%;
}

.overview-panel .article {
  /* Defend against Chrome 12+ antialiasing bug. */
  background-color: #fafafa;
}

/* Header section for the overview-inner. */
.overview-panel .overview-header,
.lightbox-panel .lightbox-header {
  -moz-border-radius: 6px 6px 0px 0px;
-ms-border-radius: 6px 6px 0px 0px;
-o-border-radius: 6px 6px 0px 0px;
-webkit-border-radius: 6px 6px 0px 0px;
border-radius: 6px 6px 0px 0px;
  -moz-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
-ms-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
-o-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
-webkit-box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
box-shadow: 0px 3px 3px rgba(200, 200, 200, .4);
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 50px;
  padding: 10px;
  position: absolute;
  top: 0px;
  -moz-transition: box-shadow 0.2s linear;
-ms-transition: box-shadow 0.2s linear;
-o-transition: box-shadow 0.2s linear;
-webkit-transition: box-shadow 0.2s linear;
transition: box-shadow 0.2s linear;
  z-index: 5;
  width: 100%;
}

.overview-header .share-controls {
  float: left;
  margin-left: 10px;
  margin-top: 4px;
}

.overview-header .overview-controls-left {
  float: left;
}

.overview-header .overview-controls-right,
.lightbox-header .lightbox-controls-right {
  float: right;
}

/* overview container where we put the real stuff. */
.overview-panel .overview-content,
.lightbox-panel .lightbox-content {
  bottom: 0px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  overflow-y: scroll; /* Always show: comments may cause it to bounce. */
  padding: 10px;
  position: absolute;
  top: 50px;
  -moz-transition: all 1s linear;
-ms-transition: all 1s linear;
-o-transition: all 1s linear;
-webkit-transition: all 1s linear;
transition: all 1s linear;
  width: 100%;
  z-index: 1;
}

.overview-panel.start .overview-header,
.lightbox-panel.start .lightbox-header {
  -moz-box-shadow: none;
-ms-box-shadow: none;
-o-box-shadow: none;
-webkit-box-shadow: none;
box-shadow: none;
  min-width: 200px; /* Stop any buttons wrapping. */
}

/* Custom webkit scrollbars */

.overview-panel .overview-content::-webkit-scrollbar,
.lightbox-panel .lightbox-content::-webkit-scrollbar {
  background: transparent;
  height: 10px;
  width: 10px;
}

/* the start/end of bar  */
.overview-panel .overview-content::-webkit-scrollbar-button:start:decrement,
.overview-panel .overview-content::-webkit-scrollbar-button:end:increment,
.lightbox-panel .lightbox-content::-webkit-scrollbar-button:start:decrement,
.lightbox-panel .lightbox-content::-webkit-scrollbar-button:end:increment {
  display: block;
  height: 10px;
  width: 10px;
}

/* the track background */
.overview-panel.overview-content::-webkit-scrollbar-track-piece,
.lightbox-panel.lightbox-content::-webkit-scrollbar-track-piece {
  background-color: #eee;
}

/* the scrollbar itself */
.overview-panel .overview-content::-webkit-scrollbar-thumb,
.lightbox-panel .lightbox-content::-webkit-scrollbar-thumb {
  background-color: #666;
  height: 50px;
  width: 50px;
}

.overview-panel.start .overview-content:not(:hover)::-webkit-scrollbar-thumb,
.lightbox-panel.start .lightbox-content:not(:hover)::-webkit-scrollbar-thumb {
  background-color: #eee;
}

.overview-panel .overview-content::-webkit-scrollbar-thumb:hover,
.lightbox-panel .lightbox-content::-webkit-scrollbar-thumb:hover {
  background-color: #333;
  height: 50px;
  width: 50px;
}




body.viewitem-open {
  overflow: hidden;
}

/* Ensure header drawer is visible. */
body.viewitem-open #header .header-drawer {
  margin-top: 0px;
  position: fixed;
  top: 65px; /* animate back down to full unscrolled height */
}

/* While open, don't highlight the view menu. */
body.viewitem-open #header #views .menu-heading {
  color: rgba(255, 255, 255, 0.6) !important;
}

body.viewitem-open #header #views .menu-heading .indicator {
  border-color: rgba(255, 255, 255, 0.6) transparent transparent transparent !important;
}

.viewitem-panel {
  bottom: 0;
  border-top: solid 1px rgba(51, 51, 51, 1);
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  left: 0;
  margin-top: 0;
  position: fixed;
  right: 0;
  top: 100px;
  -moz-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
-ms-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
-o-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
-webkit-transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
transition: margin-top 1s ease-in-out, bottom 1s ease-in-out;
  z-index: 999; /* Way up in the air. */
}

.viewitem-panel.new,
.viewitem-panel.closing {
  margin-top: -100%;
  bottom: 100%;
}

/* Bounding box of our overview item. */
.viewitem-panel .viewitem-wrap {
  background-color: white;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 100%;
  left: 0;
  margin: 0;
  overflow: hidden;
  position: relative;
  z-index: 9999;
}

/* Header section for the overview-inner. */
.viewitem-panel .viewitem-header {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 50px;
  padding: 10px;
  position: absolute;
  top: 0px;
  z-index: 5;
  width: 100%;
}

/* This is the box that things can be draw in. */
.viewitem-panel .viewitem-inner {
  bottom: 0px;
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  height: 100%;
  overflow-y: scroll;
  padding: 30px 0px;
  position: absolute;
  top: 0;
  width: 100%;
}

/* This allows us to be cute with continuous backgrounds */
.viewitem-panel .viewitem-background {
  background-color: rgba(238, 238, 238, 1);
  
  background-image: url(#EEEEEE none repeat scroll top left);
  background-position: left top;
  background-repeat: no-repeat;
  
  
  background-attachment: scroll; /* Chrome, really? */
  bottom: 0;
  left: 0;
  position: absolute;
  top: -100px; /* This should be the height of the header. */
  width: 100%;
}

/* overview container where we put the real stuff. */
.viewitem-panel .viewitem-content {
  background-color: white;
  background-clip: padding-box;
  /* TODO(kiyono): re-enable box-shadow when the performance of box-shadow */
  /* gets better.                                                          */
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;
  border-width: 2px;
  
  padding: 20px 70px;
  left: 8px; /* Align it with classic in center - why is ther an offset? */
  max-width: 750px;
  margin: 0px auto;
  position: relative;
}

.viewitem-panel .article {
  background-color: white; /* Chrome12+ anti-aliasing bug. */
}

.viewitem-panel button.close {
  margin-right: 10px;
}

.viewitem-panel .blogger-gear {
  position: absolute;
  left: 50%;
  margin-left: -47px;
  margin-top: -47px;
  top: 50%;
}




/* Styles here should be minimized to limit amount of explicit casing. */

.article {
  font-size: 14px;
  margin: 0 auto;
  max-width: 750px;
  position: relative;
}

/* Post Header */

.article .article-header {
  display: table;
  text-align: center;
  width: 100%;
}

.article .article-header .title {
  font-size: 20px;
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  width: 100%;
  display: table-cell;
  vertical-align: middle;
  text-align: center;
  padding-right: 40px; /* Compensate for ribbon, to stay centered. */
}

.article .title .edit {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAA+UlEQVR42s3U2QmDQBAG4JRgKZbio4qieIAniniiYgkpwRIsISVYQkqwhMlMiHkIhITNhGRgYNeHz/1xncPhn0pV1dkwjNW2bYkNRAzCMIQ4jj+HdzBJEmiaBtq2hSzLxOFHcBgGGMcRuq4Tg5+Be9/gmQ2kxmdrnucSG9j3/TxNEy/IGvl3oKIokqZpC+sJdV1fHceBNE2vl5oDlC3LInBjAakw9tF13TPeNRljbwh8BlKZpnnGAXGkdRRFclEUd1gIpOj0cQijPa6VIAhOdV2LgXt03/cBoy8Ib57n0QvWsixz4XFG0XEuQlVVC8a23/6HX6A80DfrAlIMSJorw8fYAAAAAElFTkSuQmCC);
  background-repeat: no-repeat;
  background-position: center center;
  cursor: pointer;
  display: inline-block;
  height: 21px;
  opacity: 0.8;
  position: relative;
  top: 3px;
  width: 21px;
}

.article .title .edit:hover {
  opacity: 1;
}

.article .article-header .date {
  float: left;
  left: 0px;
  margin: 0px 5px 5px 0px;
  position: relative;
  top: 5px;
}

/* Post Content */

.article .article-content {
  clear: both;
  color: rgba(51, 51, 51, 1);
  line-height: 1.4;
  margin-top: 10px;
  margin: 10px auto 5px auto;
  text-align: justify;
}

/* This shouldn't really be added at all... it is from feeds. */
.article .article-content .blogger-post-footer {
  display: none;
}

/* Restore a lot of the styles we reset globally. */
.article-content ol {
  list-style-type: decimal;
  margin: 0.5em 0;
  padding-left: 2em;
}
.article-content ul {
  list-style-type: disc;
  margin: 0.5em 0;
  padding-left: 2em;
}

.article-content p {
  margin: 1em 0;
}

/* Defaults from: http://www.w3.org/TR/CSS2/sample.html */
.article-content h1,
.article-content h2,
.article-content h3,
.article-content h4,
.article-content h5,
.article-content h6 {
  font-weight: bolder;
}
.article-content h1 {
  font-size: 2em;
  margin: .67em 0;
}
.article-content h2 {
  font-size: 1.5em;
  margin: .75em 0;
}
.article-content h3 {
  font-size: 1.17em;
  margin: .83em 0;
}
.article-content h4 {
  margin: 1.12em 0;
}
.article-content h5 {
  font-size: .83em;
  margin: 1.5em 0;
}
.article-content h6 {
  font-size: .75em;
  margin: 1.67em 0;
}

.article .article-content a {
  display: inline;
}

.article .article-content img {
  -moz-box-sizing: border-box;
-ms-box-sizing: border-box;
-o-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
  display: inline-block;
  height: auto;
  margin: 10px auto; /* Attempt to horizontally center. */
  /* For Sally-Anne. Keep images to the width of the post. */
  /* It's needed to avoid IE because of b/5420328 */
  
  max-width: 100%;
  
}

.article .article-content img:not(.deferred) {
  padding: 8px;
  /* TODO(kiyono): re-enable box-shadow when the performance of box-shadow */
  /* gets better.                                                          */
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAOVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///+8yHYvAAAAEnRSTlMAAgEDBAUJBwYzCw0UChARDghnBteEAAAAhElEQVR4XnWRSxJDIQgEEx1Axd/L/Q8bKCuuyOzsohHxdZLS25LSOV2ULQdflgEiIDu9KqiIFILXXpeEx2ChXwdnKNxUGxc4dZbNfXjPufkp5H0Nwtymq/dltUIweNy9qmXt08EgydDZ6+dT+9Qh9AeGenhROFI0fPjMaCHx6uIlh9/xBSJuB3l0A/6JAAAAAElFTkSuQmCC) 9 / 9px stretch;
  border-width: 9px;
  
}

/* Center all images/videos in posts. */
.article .article-content iframe,
.article .article-content embed {
  display: block;
  margin: 10px auto; /* Attempt to horizontally center. */
  /* It's needed to avoid IE because of b/5420328 */
  
  max-width: 100%;
  
}

/* Post Footer */

.article .article-footer {
  clear: both;
  text-align: center;
}

.article .article-footer .publish-info,
.article .article-footer .geolocation-info,
.article .article-footer .labels {
  color: rgba(128, 128, 128, 1);
  font-family: 'Helvetica Neue Light', HelveticaNeue-Light, 'Helvetica Neue', Helvetica, Arial, sans-serif;
  padding: 5px 0;
}

.article .article-footer .publish-info .author a,
.article .article-footer .publish-info .time {
  color: rgba(51, 51, 51, 1);
}

.article .article-footer .label:not(:last-child):after {
  content: ',';
}

.article .article-footer .share-controls {
  display: inline-block;
  margin: 10px 5px;
  text-align: center;
}

/* AdSense */

.article.has-ads {
  padding-right: 200px;
  min-height: 650px; /* To accomodate skyscraper */
}

.article .adsense-aside {
  padding: 15px 5px 0 15px;
  position: absolute;
  right: 5px;
  text-align: center;
  top: 5px;
}

.article .adsense-footer .adsense {
  margin-top: 10px;
  padding: 10px 0;
}




.comments {
  clear: both;
  margin-top: 10px;
}

.comments .comments-header,
.comments .comments-footer {
  text-align: center;
}

.comments .comments-header .comments-count {
  top: -2px;
}

.comments .comments-header h3 {
  display: inline-block;
  padding: 5px;
}

@media only screen and (max-device-width: 1024px) {
  .comments .comments-header h3 {
    color: #222;
    font-family: arial,sans-serif;
    text-decoration: underline;
  }
}
.comments .toggle-switch:hover h3 {
  cursor: pointer;
  text-decoration: underline;
}

/* Added by blogger for ghosted/removed comments .*/
.comments .deleted-comment {
  font-style: italic;
  opacity: 0.5;
}

/* While loading, hide the comment count, and then show an indicator. */
.comments.loading .comments-header .comments-count .bubble-content {
  visibility: hidden;
}

.comments.loading .comments-header .comments-count {
  background-image: url(data:image/gif;base64,R0lGODlhEAAQAPQAAGZmZv///2lpadzc3K+vr/r6+ufn5319fZmZmfDw8Le3t8DAwHV1daOjo4eHh9LS0srKygAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAAKAAEALAAAAAAQABAAAAVoICCKR9KMaCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkEAAoAAgAsAAAAABAAEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoLLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkEAAoAAwAsAAAAABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7baJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAAKAAQALAAAAAAQABAAAAVgICCOZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYAqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAAKAAUALAAAAAAQABAAAAVfICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0UaFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==);
  background-position: center center;
  background-repeat: no-repeat;
  -moz-transition: none;
-ms-transition: none;
-o-transition: none;
-webkit-transition: none;
transition: none;
}

.blogger-comments .comments-content {
  background-color: whitesmoke;
  font-size: 13px;
  margin-bottom: 16px;
  -moz-border-radius: 10px;
-ms-border-radius: 10px;
-o-border-radius: 10px;
-webkit-border-radius: 10px;
border-radius: 10px;
  -moz-transition: all 0.5s ease-in;
-ms-transition: all 0.5s ease-in;
-o-transition: all 0.5s ease-in;
-webkit-transition: all 0.5s ease-in;
transition: all 0.5s ease-in;
}

@media only screen and (max-device-width: 1024px) {
  .blogger-comments .comments-content {
    background-color: #f1f1f1;
    border: 1px solid #bbb;
    -moz-border-radius: 0;
-ms-border-radius: 0;
-o-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
  }
}
.blogger-comments .comments-content .comment-actions {
  color: #999;
}
.comments .comment .comment-actions a {
  padding-top: 5px;
  padding-right: 5px;
}
.comments .comment .comment-actions a:hover {
  text-decoration: underline;
}
.blogger-comments .comments-content .secondary-link {
  color: #69c;
}
.blogger-comments .comments-content .comment-thread {
  list-style-type: none;
  padding: 0;
  text-align: left;
}
.blogger-comments .comments-content .inline-thread {
  padding: 0.5em;
}
.blogger-comments .comments-content .comment-thread {
  margin: 8px;
}
.blogger-comments .comments-content .comment-thread:empty {
  display: none;
}
.blogger-comments .comments-content .comment-replies {
  background-color: #ebebeb;
  margin-top: 1em;
  margin-left: 36px;
  -moz-border-radius: 10px;
-ms-border-radius: 10px;
-o-border-radius: 10px;
-webkit-border-radius: 10px;
border-radius: 10px;
}
.blogger-comments .comments-content .comment {
  border-bottom: 1px solid #e3e3e3;
  margin-bottom: 16px;
  padding-bottom: 8px;
}
.blogger-comments .comments-content .comment:first-child {
  padding-top: 16px;
}
.blogger-comments .comments-content .comment:last-child {
  border-bottom: 0;
  padding-bottom: 0;
}
.blogger-comments .comments-content .comment-body {
  position: relative;
}
.blogger-comments .comments-content .user {
  font-style: normal;
  font-weight: bold;
}
.blogger-comments .comments-content .datetime {
  margin-left: 6px;
}
.blogger-comments .comments-content .comment-header,
.blogger-comments .comments-content .comment-content {
  margin: 0 0 8px;
}
.blogger-comments .comments-content .comment-content {
  text-align: justify;
}
.blogger-comments .comments-content .owner-actions {
  position: absolute;
  right: 0;
  top: 0;
}

.blogger-comments .comments-replybox {
  border: none;
  height: 250px;
  width: 100%;
}

.blogger-comments .comment-replybox-single {
  margin-top: 5px;
  margin-left: 48px;
}
.blogger-comments .comment-replybox-thread {
  margin-top: 5px;
}

.blogger-comments .comments-content .user,
.blogger-comments .comments-content .user a {
  color: rgba(51, 51, 51, 1);
}

.blogger-comments .icon.blog-author {
  width: 18px;
  height: 18px;
  display: inline-block;
  background-repeat: no-repeat;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
  margin: 0 0 -4px 6px;
}

.blogger-comments .comments-content .loadmore a {
  background: #fafafa;
  border-top: 1px solid #e3e3e3;
  display: block;
  padding: 10px 16px;
  text-align: center;
}

.blogger-comments .thread-toggle {
  cursor: pointer;
  display: inline-block;
  color: rgba(0, 158, 184, 1);
}

.blogger-comments .continue {
  cursor: pointer;
}

.blogger-comments .continue a {
  color: #888;
  display: block;
  padding: 0.5em;
  background: white;
  border: 1px solid #CCC;
  -moz-box-shadow: inset 1px 1px 3px #888;
-ms-box-shadow: inset 1px 1px 3px #888;
-o-box-shadow: inset 1px 1px 3px #888;
-webkit-box-shadow: inset 1px 1px 3px #888;
box-shadow: inset 1px 1px 3px #888;
}

.blogger-comments .comments-content .loadmore:hover a {
  background: #f1f1f1;
  border-top: 1px solid #fff;
}

.blogger-comments .comments-content .loadmore {
  cursor: pointer;
  max-height: 3em;
}

.blogger-comments .comments-content .loadmore.loaded {
  max-height: 0px;
  opacity: 0;
  overflow: hidden;
  -moz-transition: all 0.5s ease-in;
-ms-transition: all 0.5s ease-in;
-o-transition: all 0.5s ease-in;
-webkit-transition: all 0.5s ease-in;
transition: all 0.5s ease-in;
}

@media only screen and (max-device-width: 1024px) {
  .blogger-comments .comments-content .loadmore a,
  .blogger-comments .comments-content .loadmore:focus a {
    background: none;
    border-top: 1px solid #ccc;
  }
}
.blogger-comments .thread-chrome.thread-collapsed {
  display: none;
}

.blogger-comments .thread-toggle {
  display: inline-block;
}

.blogger-comments .thread-toggle .thread-arrow {
  display: inline-block;
  height: 6px;
  width: 7px;
  overflow: visible;
  margin: 0.3em;
  padding-right: 4px;
}

.blogger-comments .thread-expanded .thread-arrow {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAG0lEQVR42mNgwAfKy8v/48I4FeA0AacVDFQBAP9wJkE/KhUMAAAAAElFTkSuQmCC") no-repeat scroll 0 0 transparent;
}

.blogger-comments .thread-collapsed .thread-arrow {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAJUlEQVR42mNgAILy8vL/DLgASBKnApgkVgXIkhgKiNKJ005s4gDLbCZBiSxfygAAAABJRU5ErkJggg==") no-repeat scroll 0 0 transparent;
}

.blogger-comments .avatar-image-container {
  float: left;
  width: 36px;
  max-height: 36px;
  overflow: hidden;
}

.blogger-comments .avatar-image-container img {
  width: 36px;
}

.blogger-comments .comment-block {
  margin-left: 48px;
  position: relative;
}

/* Responsive styles. */
@media screen and (max-device-width: 480px) {
  .blogger-comments .comments-content .comment-replies {
    margin-left: 0;
  }
}



.share-controls {
  overflow: hidden;
  text-align: center;
  white-space: nowrap;
}

.share-controls span,
.share-controls iframe {
  height: 20px !important;
}

.share-controls .share-plusone,
.share-controls .share-twitter,
.share-controls .share-facebook {
  /* PlusOne tries to reset a lot of settings, don't let it. */
  background-repeat: no-repeat !important;
  background-position: left center !important;
  display: inline-block;
  margin: 0;
}

/* To avoid the 'jitter' of buttons loading, set a background image
   of the button in its place. Once loaded, the button covers. */
.share-controls .share-plusone {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAUCAYAAADskT9PAAACrElEQVRIS8WW30tTYRjH37+roLyovKgor7xY0AySfoHSXRhSiRWUXYSEpAXRRSqsbSxlbI2xsaFt/aJEwTnn3Pm5n25uczi2b+d5ZQdP7JCVrYsP4zzPed7Pc973Pe8ZA8Ci0ahV44MGOgS5rORmkUhkeHl5GcViEfV6vSOQi5zkZouLi3KlUsHOzg6q1WpHIBc5yc0WFhZ4kAKdhJzkZuFwGOVy+b9AbhYKhVBKK5Cnn0MYv4e1/jNY7T2qsz7Qi8LKd2xvbx865GbBYBAx6ynkw++xu7uLZrMJ+ekdLleejaLRaPBuS6XSb5McGeDjmOXJzQKBABLaU9K6bG1tcWqlIuKXT/PizMewHj8oeTGFzbEhfRbN7iM38/v92LhpQaFQ0KGkMvFgbxZsrwy5dqxdPW+4phmNXzmH2MUTfAyzOnIzn8+HmKULOa3rfD6vo05P8uK0640h3o74tR7DtTT1GJVCjsdpDLM6cjOv18tvEmdfIpfL6UgTD7HW142SlDLE9xOznjRsWLqmOK0v/bYaMKsnN/N4PHvFluMQ7a+hajtefDeDeP9ZVFe+8k6z2WxbWu8ziVpnyf58qwGzenIzt9uNWmIV6tQjJO/eQOxCl1Z0BOWlT3wvZDKZXxLX9oBZnMYyqyM3m5+f50/Jj8hCnhfwoqUvSKfTB4Je03bxVgNmdeRmc3NzUBSFo6oqkrf6eFHsUjeEoFfP/Ql02FBzZnlyM5fLhZT7LTamxrAxPoLU6CDWr/fszYTlGM/JsvxPIDdzOp1IPrmNoiTwbmu1GurVinYO3NebEL59hiRJhw65mcPhEOj7TB2JosihJN/Rs5O8ic2ZF3rusEgkEiA3s9vtQ3QiUUAQBANFVeYNKNoy/Jz7G8hFTnIz+ltks9mGNWQNdAhyDZP7B9FT1Mw7jWv8AAAAAElFTkSuQmCC) !important;
  height: 20px;
  /* Don't touch anything other than min-width, causes havoc with +1 */
  min-width: 90px;
  -moz-transition: min-width 0.3s;
-ms-transition: min-width 0.3s;
-o-transition: min-width 0.3s;
-webkit-transition: min-width 0.3s;
transition: min-width 0.3s;
}
.share-controls .share-plusone.defer {
  min-width: 34px;
}
.share-controls .share-plusone.delay {
  min-width: 90px;
}

.share-controls .share-twitter {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAAUCAYAAAAp46XeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFSklEQVRYCd1Ye0yTVxT/9UFbCm15qKU8JhQQURFQfMBUog6VxMSJJo5tZsvcPzPGZJkxzmzLEmOWbZIlji1LZtxkbPMRzHyyKI4hWubkvWEtIC8RmEApKrUP2u6e28JaqMuMcYmc5Pb7zrn3PH73nHO/r5/A5XKhqt3oajNaMFVIGyZDZlyYQKBrG3TJpFKkRwZNFWyo6xmBxWqFkDI2lYBRhggP4RJOmXT5ASImmcXu9DP17Is4uMeBUXLdgC7jMDYsnA3tNOXjqP7vazk4u9Pl4/jkdT1yUhKgkAX4yPMOXYC+bwhJIRK8tjwN3nqkc7yyzmc9MevSEvD6qsWT5E8qaO4bRqBEiJgwxSNN8Z5zOJ3wHjcHHiBjXxF2H7sEXUs3n/v8ajNa7TKIFWEwDIxg99EyH515MZFYlpKItFgNatvuIE49jfMLtDN91nn7eZL7D4+W4svSqkfaJsR+D5S9uYsQGhGNMy0D2Pb9r3jv53qc67oPoSwYwiAlhMEh+KWlB0NmK9oHzXzn4mco8PbaxXhrjTtLr6xI43xtWycKzur4GrPNgY0fF6Gpq5/zV27cwo5Dp/l98eVGrN/3NZ8/VWOA1eGupurmbrz82Q987tOfKri8/M9b0N/uQ1mDHlsPHkePaYTbmPjDwZEh72G2O/DF5qUI08RAHKrGuc4H6LMI2FYIIRAFQEQAA4Px/P5i1Le2j+sOW0dxz+Y+nB5abSBeqVDgxJUavubiH624eacfP15t4PxRXRMkIgEITOH5CryzcRV2rs3EniNnoTN04dbd+9haeAy56bPw0db1KK014OCZy0iKjkCEMhBadTjeWJGOELlsPIYxHATUb+ZoYqZCgsWxaoiU4TxjBIwTAQyQInS6GkuTtRhm2fg3ot4dNttQ39GLi3UGZCTE8B03M/C/GTqQt2QOvi27hqykWKjkgVApg5Aep0GJrgEndbWIn65kpR7F+zsnNR7H2MaEK+QIVamgjZiBlWmJEIn8w+BSh4P1HBvdgw/4le6lYjEOrIxDUricZ2wcAOtPovx5kTj86krkZ6WM65Ce1cEy7CHiiVbPT8SZ32/gUmMLDr65gcsKTlVCzLK2KEnL+ebuPhRX1PBBQeekJ2HUMYqBEQu+Ka/m8hGbC/nZGdyf0xMHlTr5mTjIqM+jQMXSu4sdItroUMxRa9AwaMXdId93TpfDjsCHJuSnzgcZnkhOx2TZpoxkbD98GrOjpvNNeyE1GSVVDdiUmcqDWjY3AeV1TXh/yxqEyqU4WdmARfHRiFIEoaiiHttWL8VCbQTKGpshE0u5SyGroM5+I0xmCy/LiXEQzzNnZb1LQ86O1v2bstFpdODdC0040WLEkGeHaLHLbkWi3IVDL6bzIMf0vK+0QSq5BKpgBbdJc0vmaLmMSpD4LZlzyRzo0CF+R24mZrE+ytpTiOSdBfiOleRD1rsp8VHYm5eNzQeKELf9E+wqOs/1SOel5QtQ3Xobqz/4Cr0m87gvmqNBJCiuvuPKilWyI1UIkdBdRnKpBHr2OCjrMKHZkzmlVIzlEVKsm6WBeZStYyXzKIoLD0bPsAXW0X/WqIMksLkE/ISlkg+RCmGysjL2rNEo5XAymzb7KEJYT7WbWMUwnjIpE4tgZH0bqZKN26UYFZ66+8syOR5dxz03uCXPhUyKUxQghJS1j3ezEijHU35VI7/+fNDGUwL+K13rMvn2nLciOXA/wdzZ9J57mvf+gJG/xwE2Fh9PrOfRNCabMlf+Z9XMTjhNkO975LOMsHfEDrlIBMHYZwZ9S9uzjMcn9uRELf/M8DdRh83rstvalwAAAABJRU5ErkJggg==) !important;
  height: 20px;
  width: 110px;
  -moz-transition: width 0.3s;
-ms-transition: width 0.3s;
-o-transition: width 0.3s;
-webkit-transition: width 0.3s;
transition: width 0.3s;
}
.share-controls .share-twitter.defer {
  width: 57px;
}
.share-controls .share-twitter.delay {
  width: 110px;
}

.share-controls .share-facebook {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAUCAYAAAAk/dWZAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVRIDd1XXUhTYRh+tjPb5mwNpzV0aSiWZESihMQI7M6bEn8ujKKCQMIuDKurpMQLQxQWNEUIIoT0wkIrC4MMNCOiZUWU1tD5/5fzd87jNtf3HV2d6c5+jKD1wtn3/n/Pe973nJ1P5HK5YB6ZdVnmWThXXQgVYsQiRCql2BOrEon6h2dcizYHolUySBhxqNQAh3MVU7PLiJBLIKYdCLUC6J2mN5zipvjFdIRCqQP8UaG4Ofx8JZ+/XPkM3wd+8FWCfFJ8FKquZgna/7ZB8CEItAAKMBhfj4Kcc2h/+gmjrIc2aEGwCF+ZMlLj8Op+IXdR3iuxwyguqkejyROhtacTJ4o6MUeD2Fncav2ISafXDAErJQF78hyrrmRhdHIB30wTmJkWHjkbibE7PBEq4g6i8pITCpqPYaCBjJd5a+yWOkG3ogVcu/0CvYNLQe3MWvpQ83gAnv2hKZbwUN+A4oY+OIjETvWhrKSedK0ep/TvMO1jl6CK2KmOwNmcNC6dSr2d46kuGHIs2mA20R65iYGcsaO95gHuDcWjtCABEligv9EFWXYWWgy5yJn/ivLnE+6ATWtQ45QQF4nzeelckkP7doFePf1TmJxe3JRYULFhRzmsaKxtwvuh3aitPgI1CXSMD+M1WTVGI/S9DMwEf//YcqApBf04w5vuQehO1nEP9IfeCVwsa/YdwFkZPz4SyLZJgWULTON2xGjC4KTzREinS8Fh0miHLhkydfSa0stvUOPkJd6nSk6sC4tWOFg7rEssrGTlBp4XZSPDk12YjVKdE9XlTegYX4VUq0Um8TGaV5CYrEVKcgyiFMJQNzSXl52wqftjPRU8aUf4tl/27i8jPMtvlhbRdrcVbW6Vai/unCMC74VEfWysGOkF2ShZaSaFPIGy4jgulGbgZnkXcl92cdGazEzU5WndmTxWn0V4ePIE+uXrl6RaVBhOe3VrqV5XEx+9IX9dCMPRM/nkWheVSbhuSCQdJN1jwqCQbqET9FPiUYcRsaoojMyu/Re4+Y36Y2kHvIL9c6UYinDyvPgh0dvPY66EGKUft3/X3Dc6DzE9XNBv81AkipviF9PTET1chFoh7kMRxS/6H46nPwG0xCqstPx1sgAAAABJRU5ErkJggg==) !important;;
  height: 20px;
  width: 90px;
  -moz-transition: width 0.3s;
-ms-transition: width 0.3s;
-o-transition: width 0.3s;
-webkit-transition: width 0.3s;
transition: width 0.3s;
}
.share-controls .share-facebook.defer {
  width: 51px;
}
.share-controls .share-facebook.delay {
  width: 90px;
}





#gadget-dock {
  background-color: #333;
  width: 50px;
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-ms-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-o-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);;
  -moz-border-radius: 2px 0 0 2px;
-ms-border-radius: 2px 0 0 2px;
-o-border-radius: 2px 0 0 2px;
-webkit-border-radius: 2px 0 0 2px;
border-radius: 2px 0 0 2px;;
  
  -moz-transition: right 0.15s ease-in-out;
-ms-transition: right 0.15s ease-in-out;
-o-transition: right 0.15s ease-in-out;
-webkit-transition: right 0.15s ease-in-out;
transition: right 0.15s ease-in-out;;
  
  position: fixed;
  right: -40px;
  top: 124px;
  z-index: 3000;
}


#gadget-dock:hover,

#gadget-dock.gadget-notifying,
#gadget-dock.gadget-opening {
  right: 0;
}

/* expand the hover area */
#gadget-dock:after {
  content: '';
  display: block;
  width: 90px;
  height: 110%;
  position: absolute;
  top: -5%;
  left: -40px;
  z-index: -100;
}

#gadget-dock.gadget-opening:after {
  display: none;
}

.gadget-item {
  position: relative;
  z-index: 1;
}

.gadget-selected {
  z-index: 0;
}

.gadget-item:empty {
  display: none;
}

.gadget-menu {
  cursor: pointer;
  background-color: #333;
  border-top: 1px solid #585858;
  text-align: center;
  z-index: 0;
}

.gadget-icons {
  width: 50px;
  height: 50px;
  line-height: 50px;
}

.gadget-menu .gadget-title {
  display: none;
}

.gadget-selected .gadget-menu {
  background-color: white;
  border-color: #ccc;
}

.gadget-item:first-child .gadget-menu {
  border-top: 1px solid transparent;
  -moz-border-radius: 2px 0 0 0;
-ms-border-radius: 2px 0 0 0;
-o-border-radius: 2px 0 0 0;
-webkit-border-radius: 2px 0 0 0;
border-radius: 2px 0 0 0;
}

.gadget-selected.gadget-item:first-child .gadget-menu {
  border-color: #ccc;
  -moz-border-radius: 0;
-ms-border-radius: 0;
-o-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
}

.gadget-item:last-child .gadget-menu {
  -moz-border-radius: 0 0 0 2px;
-ms-border-radius: 0 0 0 2px;
-o-border-radius: 0 0 0 2px;
-webkit-border-radius: 0 0 0 2px;
border-radius: 0 0 0 2px;
}

.gadget-selected.gadget-item:last-child .gadget-menu {
  -moz-border-radius: 0;
-ms-border-radius: 0;
-o-border-radius: 0;
-webkit-border-radius: 0;
border-radius: 0;
}

.gadget-icon, .gadget-icon-selected {
  display: inline-block;
  max-width: 30px;
  max-height: 30px;
  vertical-align: middle;
}

.gadget-icon-selected {
  display: none;
}

.gadget-selected .gadget-icon {
  display: none;
}

.gadget-selected .gadget-icon-selected {
  display: inline-block;
}




.gadget-container {
  background-color: white;
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-ms-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-o-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);;
  line-height: 1.4em;
  text-align: left;
  visibility: hidden;
  z-index: -1;
  margin-left: 100%;
  word-wrap: break-word;
  max-width: 700px;
}


.gadget-container {
  
  -moz-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
-ms-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
-o-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
-webkit-transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;
transition: right 0.15s ease-in-out, opacity 0.15s ease-in-out;;
  
  opacity: 0;
  position: absolute;
  top: 0;
  right: -100px;
}


.gadget-container:hover,
.gadget-item:hover .gadget-container,

.gadget-selected .gadget-container {
  visibility: visible;
  right: 49px;
  opacity: 1;
}

.gadget-selected .gadget-container {
  border: 1px solid #ccc;
  -moz-border-radius: 2px 0 0 2px;
-ms-border-radius: 2px 0 0 2px;
-o-border-radius: 2px 0 0 2px;
-webkit-border-radius: 2px 0 0 2px;
border-radius: 2px 0 0 2px;;
  cursor: auto;
  z-index: -100;
}

.gadget-selected.gadget-dock-overflow-bottom .gadget-container {
  position: fixed;
  bottom: 27px;
  top: auto;
}

.gadget-selected.gadget-dock-overflow-client-area .gadget-container {
  position: fixed;
  top: 0;
  bottom: 24px;
}




/* HACK: Because IE8 ignores max-width when "overflow-y: scroll" is set */
/* the scroll-bar is shown by the child element of .gadget-container.   */
.gadget {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  /* IE scroll-bar */
  scrollbar-arrow-color: white;
  scrollbar-track-color: white;
  scrollbar-face-color: #999;
  scrollbar-highlight-color: #999;
  scrollbar-shadow-color: #999;
  scrollbar-3dlight-color: white;
  scrollbar-darkshadow-color: white;
}
.gadget-selected.gadget-dock-overflow-client-area .gadget {
  overflow-y: scroll;
}

.gadget::-webkit-scrollbar {
  width: 14px;
}

.gadget::-webkit-scrollbar:hover {
  background-color: #f3f3f3;
}

.gadget::-webkit-scrollbar-thumb {
  border-width: 0 0 0 4px;
  border-color: #999;
  border-style: solid;
}

.gadget::-webkit-scrollbar-thumb:hover {
  border-width: 0 0 0 12px;
}

.gadget::-webkit-scrollbar-button {
  width: 14px;
  height: 16px;
}

.gadget::-webkit-scrollbar-corner {
  background-color: transparent;
}


.gadget-content {
  display: none;
  overflow: hidden;
  position: relative;
}

.gadget-selected .gadget-content {
  display: block;
}

.gadget-container .gadget-title {
  display: block;
  background-color: #333;
  color: white;
  display: block;
  font-size: 14px;
  padding: 1px 16px 0 16px;
  height: 50px;
  line-height: 50px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  position: relative;
}

.gadget-container .gadget-title:hover {
  text-decoration: underline;
}

.gadget-selected .gadget-container .gadget-title {
  background-color: transparent;
  color: black;
  font-size: 16px;
  height: 40px;
}

.gadget-selected .gadget-container .gadget-title:hover {
  text-decoration: none;
}

.gadget-content {
  background-color: white;
}

.gadget-resize-detector {
  background-color: transparent;
  border-style: none;
  margin: 0;
  padding: 0;
  outline: 0;
  width: 0;
  height: 100%;
  position: absolute;
  right: 0;
  top: 0;
  z-index: -1;
}






/* Center align posts. Border between them. */
ol.items {
  text-align: center;
  
  
  padding: 18px 10px 20px 10px;
  
}
li.item {
  background-color: white;
  background-clip: padding-box;
  /* TODO(kiyono): re-enable box-shadow when the performance of box-shadow */
  /* gets better.                                                          */
  
  
  -moz-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-ms-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-o-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;

/* If border-image is declared below -webkit-border-image */
/* Webkit doesn't render correctly.                       */

border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;


-webkit-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAANUlEQVQIW2NkYGBgQ8JAJsMvEGYEEjxQzA0SBYKvQPwFJCEExIJAfBcqoQyk3+OVwGkUVssBP4wMT0ZBZV0AAAAASUVORK5CYII=) 2 / 2px repeat;
  border-width: 2px;
  
  padding: 20px 70px;
  max-width: 750px;
  margin: 0px auto;
  position: relative;
}
li.item + li.item {
  margin-top: 30px;
}
li.ad {
  padding: 20px 70px;
  max-height: 200px;
  margin: 0px auto;
  position: relative;
}
.article {
  position: static;
}

/* Ribbon to hang off the left. */
.article .article-header .date.ribbon {
  position: absolute;
  left: 20px;
  top: 20px;
}

/* Unloaded images to have loading indicator. */
img.deferred {
  background-repeat: no-repeat;
  background-position: center center;
  background-image: url(data:image/gif;base64,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);
  border: solid 1px #ccc;
}

@media only screen and (max-width : 600px) {
  #header-container {
    height: 81px;
  }
  #header .header-bar,
  #header .header-bar .title h1,
  #header .header-bar .title h3 {
    height: 48px;
  }
  #header .header-bar .title {
    height: 48px;
    line-height: 48px;
    margin-right: 50px;
  }
  #header .header-bar .title h1 {
    font-size: 20px;
  }
  #header .header-bar .title h3 {
    font-size: 16px;
  }
  /* Show magnifier icon instead of showing placeholder. */
  #header input#search {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAuElEQVQ4y72UQQ2GMAyFJwEJk1AJSEBCJUwCTiaB086/BCQgAQlQki55aSD/mhEO77Dt7UvXtQ2llPCWwlewKBpF1AO7Lv9EB2gXsRdGevECbKJFtAI0eWA1omz2GYCxBRYhojtz/hcdLkY1Lw/mSc/nFhipeX0wJw8sQPLtzw1wRq0wTHTWpyXzw646S6bGDgDVNLCnA6JCZ1V9GtYc9/Ymm2i5t9EtkHqnBkP+hjdGECHo03nm1gl0/D1dbs3/WAAAAABJRU5ErkJggg==);
    background-repeat: no-repeat;
    background-position: center center;
    color: transparent;
    top: 9px;
    -moz-transition: width 0.17s ease-in-out;
-ms-transition: width 0.17s ease-in-out;
-o-transition: width 0.17s ease-in-out;
-webkit-transition: width 0.17s ease-in-out;
transition: width 0.17s ease-in-out;;
    width: 22px;
  }
  #header input#search:focus {
    background-image: none;
    color: black;
    width: 200px;
  }
  #header input#search::-webkit-input-placeholder {
    color: transparent;
  }
  #header input#search:focus::-webkit-input-placeholder {
    color: #b5b5b5;
  }
  #header .header-drawer,
  #header .menu .menu-heading,
  #header .tabs li,
  #header .admin-controls,
  #header .admin-controls .dashboard,
  #header .admin-controls .new-post {
    height: 28px;
    line-height: 28px;
  }
  #header .header-drawer,
  #header .header-drawer.sticky {
    top: 17px;
  }
  
  #header:hover .header-drawer,
  #header .header-drawer.open {
    top: 48px;
  }
  
  #header .menu .menu-heading {
    height: 28px;
    line-height: 28px;
  }

  #header #pages::before {
  
    height: 14px;
  }
}

@media only screen and (max-width : 600px) {
  #gadget-dock {
    width: 40px;
    right: 0;
    top: 100px;
  }
  #gadget-dock:after {
    display: none;
  }
  .gadget-icons {
    width: 40px;
    height: 40px;
    line-height: 40px;
  }
  .gadget-container {
    max-width: 280px;
  }
  
  .gadget-container:hover,
  .gadget-item:hover .gadget-container,
  
  .gadget-selected .gadget-container {
    right: 39px;
  }
  .gadget-title {
    height: 40px;
    line-height: 40px;
  }
  .gadget-selected .gadget-title {
    line-height: 50px;
  }
}

@media only screen and (max-width : 600px) {
  li.item {
    padding: 20px 10px 20px 10px;
  }
  li.ad {
    padding: 20px 0;
  }
  .article .article-header {
    height: 64px;
  }
  .article .article-header .title {
    padding-right: 0px;
    padding-left: 50px;
  }
}



.article-content iframe {
  max-width: 100%;
}

.article-content a[imageanchor] {
  margin: 0 !important;
}</style><!-- Yo Dawg... --><meta name="meta" content="meta"></head>
<body class="classic notouch">









<div id="header-container">
  <div id="header" class="header">
    <div class="header-bar">
      
<span class="title" onclick="$('html,body').stop().animate({'scrollTop': 0})">
  <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/" target="_self"><h1 title="AR.Drone Development">AR.Drone Development</h1></a>
  
</span>
<input id="search" autocomplete="off" placeholder="Search" type="text">

      
    </div>
    <div class="header-drawer sticky">
      
      <div id="views" class="menu">
        <span class="menu-heading">Classic<span class="indicator"></span></span>
        <ul>
          
          <li class="Classic"><span class="menu-background"></span><a class="menu-item current" href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=classic" target="_self">Classic</a></li>
          
          <li class="Flipcard"><span class="menu-background"></span><a class="menu-item " href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=flipcard" target="_self">Flipcard</a></li>
          
          <li class="Magazine"><span class="menu-background"></span><a class="menu-item " href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=magazine" target="_self">Magazine</a></li>
          
          <li class="Mosaic"><span class="menu-background"></span><a class="menu-item " href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=mosaic" target="_self">Mosaic</a></li>
          
          <li class="Sidebar"><span class="menu-background"></span><a class="menu-item " href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=sidebar" target="_self">Sidebar</a></li>
          
          <li class="Snapshot"><span class="menu-background"></span><a class="menu-item " href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=snapshot" target="_self">Snapshot</a></li>
          
          <li class="Timeslide"><span class="menu-background"></span><a class="menu-item " href="http://ardrone-ailab-u-tokyo.blogspot.fr/?view=timeslide" target="_self">Timeslide</a></li>
          
        </ul>
      </div>
      
      
      <div id="pages" class="tabs">
        <span class="menu-heading">Pages<span class="indicator"></span></span>
        <ul>
          
          <li><span class="menu-background"></span><a class="menu-item" href="http://ardrone-ailab-u-tokyo.blogspot.fr/">Home</a></li>
          
        </ul>
      </div>
      
      <div style="" class="blog-admin admin-controls">
        <a class="new-post" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;from=pencil" target="_self" title="New post"></a>
        <a class="dashboard" href="http://www.blogger.com/home" target="_self" title="Dashboard"></a>
      </div>
    </div>
  </div>
</div>





<div id="main" class="hfeed " tabindex="0">
  <ol id="items" class="items"><li class="item" data-id="3040566199718160048">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="//img.youtube.com/vi/1m0Yu9xHbkc/0.jpg">
    <meta itemprop="thumbnailUrl" content="//img.youtube.com/vi/1m0Yu9xHbkc/0.jpg">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="3040566199718160048">

  
  <div class="article-header">


<a class="ribbon date " title="14th November 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/opencv-levmarqsparse-class-for-sparse_13.html" itemprop="url">


  <div class="top ribbon-piece">Nov</div>
  <div class="bottom ribbon-piece">14</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/opencv-levmarqsparse-class-for-sparse_13.html" rel="bookmark" itemprop="url">



OpenCV LevMarqSparse class for Sparse Bundle Adjustment</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=3040566199718160048&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><b>This
 page was written as my personal documentation, since there was no 
documentation for&nbsp;Sparse Bundle Adjustment&nbsp;at the time I wrote
 this.</b><br>
<b>In the current OpenCV, the bug is reported to be fixed. (I have not checked.)</b><br>
<b>The version I used was (if I remember correctly) 2.4.2</b><br>
<b>As I have left the project right now, there are not so many things I can answer, sorry.</b><br>
<br>
Today's topic is not about AR.Drone but about OpenCV.<br>
<br>
After searching for web, I could not find any sample code of 3D 
reconstruction from series of images from non-stereo camera, ( If you 
know one I'm more than glad to hear it. ) even though there are some 
discussions on stackoverflow, yahoo group etc. I guess there are two 
main reasons for this. The first one is that OpenCV does not have a 
simple function to retrieve motion (extrinsic parameters of the camera) 
from fundamental matrix. The second reason is that OpenCV does not 
document their&nbsp;<span class="st">Levenberg-Marquardt and Sparse Bundle Adjustment implementation.</span><br>
<span class="st"><br></span><span class="st">Today I write about the 
later one, how to use Sparse Bundle Adjustment in OpenCV library with 
simple implementation. I have also implemented 3D reconstruction 
algorithm described&nbsp;<a href="http://en.wikipedia.org/wiki/Essential_matrix" target="_blank">here</a></span><span class="st">&nbsp;(or the original paper of&nbsp;</span><span class="st"><span class="st"><a href="http://books.google.com/books?hl=en&amp;lr=&amp;id=ZQFclQnulScC&amp;oi=fnd&amp;pg=PA61&amp;dq=A+computer+algorithm+for+reconstructing+a+scene+from+two+projections&amp;ots=tzG0w2LjjB&amp;sig=h499dOKyB7cqJ1tbGhUjUxzNO1s" target="_blank">Longuet-Higgins' paper</a>)</span>, but the result is unstable so I do not share for a while.</span><br>
<span class="st"><br></span><span class="st"><br>1. library bug fix</span><br>
<br>
<span class="st">Sparse Bundle Adjustment is implemented in contrib module, and&nbsp;<a href="http://tech.groups.yahoo.com/group/OpenCV/message/71174" target="_blank">there are several bugs reported</a>. This bug is fixed in current version, but there is one more bugs in cv::LevMarqSparse::bundleAdjust.&nbsp;</span><span class="st">cv::LevMarqSparse::bundleAdjust
 is an interface for actual SBA function and if you are following the 
definition of camera coordinate system and camera motion of OpenCV, then
 you can use it without writing own function to calculate object points (
 3D points )&nbsp;</span>projection&nbsp;and a function to calculate Jacobian of the projection.<br>
<span class="st"><br></span>Open&nbsp;<span class="st">module/contrib/src/ba.cpp and edit line around 1100</span><br>
<br>
<span class="st">from</span>
<br>
<pre style="border: 0px; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; line-height: 16px; padding: 0px;"><span class="c1" style="border: 0px; color: #999988; font-style: italic; margin: 0px; padding: 0px;">//rotation</span>
<span class="n" style="border: 0px; margin: 0px; padding: 0px;">Mat rot_vec=Mat(levmar.P).rowRange(i*num_cam_param, i*num_cam_param+</span><span class="mi" style="border: 0px; color: #009999; margin: 0px; padding: 0px;">3</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">);
Rodrigues(rot_vec, R[i]);</span>
<span class="c1" style="border: 0px; color: #999988; font-style: italic; margin: 0px; padding: 0px;">//translation</span>
<span class="n" style="border: 0px; margin: 0px; padding: 0px;">T[i] = Mat(levmar.P).rowRange(i*num_cam_param + </span><span class="mi" style="border: 0px; color: #009999; margin: 0px; padding: 0px;">3</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">, i*num_cam_param+</span><span class="mi" style="border: 0px; color: #009999; margin: 0px; padding: 0px;">6</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">);</span>
</pre>
<span class="st">to</span><br>
<pre style="border: 0px; color: #333333; font-family: Consolas, 'Liberation Mono', Courier, monospace; font-size: 12px; line-height: 16px; padding: 0px;"><span class="c1" style="border: 0px; color: #999988; font-style: italic; margin: 0px; padding: 0px;">//rotation</span>
<span class="n" style="border: 0px; margin: 0px; padding: 0px;">Mat</span> <span class="n" style="border: 0px; margin: 0px; padding: 0px;">rot_vec</span> <span class="o" style="border: 0px; font-weight: bold; margin: 0px; padding: 0px;">=</span> <span class="n" style="border: 0px; margin: 0px; padding: 0px;">Mat</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">(</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">levmar</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">.</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">P</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">).</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">rowRange</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">(</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">i</span><span class="o" style="border: 0px; font-weight: bold; margin: 0px; padding: 0px;">*</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">num_cam_param</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">,</span> <span class="n" style="border: 0px; margin: 0px; padding: 0px;">i</span><span class="o" style="border: 0px; font-weight: bold; margin: 0px; padding: 0px;">*</span><span class="n" style="border: 0px; margin: 0px; padding: 0px;">num_cam_param</span><span class="o" style="border: 0px; font-weight: bold; margin: 0px; padding: 0px;">+</span><span class="mi" style="border: 0px; color: #009999; margin: 0px; padding: 0px;">3</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;">);
Mat R_tmp(</span><span class="mi" style="border: 0px; color: #009999; margin: 0px; padding: 0px;">3</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;"></span>,<span class="mi" style="border: 0px; color: #009999; margin: 0px; padding: 0px;">3</span><span class="p" style="border: 0px; margin: 0px; padding: 0px;"></span>,CV_64F);
<span class="p" style="border: 0px; margin: 0px; padding: 0px;">Rodrigues( rot_vec, R_tmp);
R_tmp.copyTo(R[i]);</span>
<span class="c1" style="border: 0px; color: #999988; font-style: italic; margin: 0px; padding: 0px;">//translation</span>
<span class="c1" style="border: 0px; color: #999988; font-style: italic; margin: 0px; padding: 0px;">// T[i] = Mat(levmar.P).rowRange(i*num_cam_param + 3, i*num_cam_param+6);</span>
<span class="p" style="border: 0px; margin: 0px; padding: 0px;">(Mat(levmar.P).rowRange(i*num_cam_param + 3, i*num_cam_param+6)).copyTo(T[i]); </span>
</pre>
<br>
<span class="st">Substituting&nbsp; into T[i] is shallow copy and does 
not update the values. After you fixed it, build the library and install
 again.</span><br>
<span class="st"><br></span><span class="st">2. Usage</span><br>
<span class="st"><br></span><span class="st">cv::LevMarqSparse::bundleAdjust takes 8 arguments.</span><br>
<span class="st"><br></span><span class="st">Let N and M denote the number of object points and the number of cameras.</span><br>
<span class="st"><br></span><span class="st">arg1: N x 3 object points</span><br>
<span class="st">&nbsp;&nbsp;&nbsp; ex. std::vector&lt;cv::Point3d&gt;</span><br>
<span class="st">arg2: M x N x 2 image points for each camera and each points.</span><br>
<span class="st"></span><br>
<span class="st"><span class="st">&nbsp; &nbsp; ex. std::vector&lt;std::vector&lt;cv::Point2d&gt; &gt;</span></span><br>
<span class="st"><span class="st">&nbsp; &nbsp;&nbsp;The outer &nbsp;vector has M elements and each element has N elements of Point2d&nbsp;&nbsp;</span></span><br>
<div>
<span class="st"><span class="st">arg3:&nbsp;</span>M x N x 1 visibility matrix, the element [i][j] = 1 when object point i is visible from camera j and 0 if not.</span></div>
<span class="st">&nbsp; &nbsp; ex. std::vector&lt;std::vector&lt;int&gt; &gt;</span><span class="st">arg4: M x 3 x 3 camera matrix (intrinsic parameters) 3 x 3 camera matrix for each image</span><span class="st">&nbsp; &nbsp; ex. std::vector&lt;cv::Mat&gt;</span><br>
<span class="st"></span><br>
<span class="st"><span class="st"></span></span><br>
<span class="st"><span class="st"><span class="st">arg5: M x 3 x 3 rotation matrix &nbsp;for each image</span><span class="st">&nbsp; &nbsp; ex. std::vector&lt;cv::Mat&gt;</span></span></span><br>
<div>
<span class="st"><span class="st"><span class="st"><span class="st"><span class="st">arg6: M x 3 x 1 transition matrix &nbsp;for each image&nbsp;</span><br>
<span class="st">&nbsp; &nbsp; each cv::Mat has to be column vector (3x1) and not row vector</span><span class="st">&nbsp; &nbsp; ex. std::vector&lt;cv::Mat&gt;</span><br>
</span></span></span></span><br>
<div>
<span class="st"><span class="st"><span class="st"><span class="st">arg7: M x (4, 5, or 8) x1 &nbsp;distortion coefficient &nbsp;for each image</span><span class="st">&nbsp; &nbsp; ex. std::vector&lt;cv::Mat&gt;</span><br>
</span></span></span><br>
<div>
<span class="st"><span class="st"><span class="st"><span class="st"></span></span></span></span></div>
<span class="st">
</span></div>
<span class="st"></span></div>
<span class="st"></span><br>
<span class="st">&nbsp; &nbsp; each cv::Mat has to be column vector and not row vector</span><span class="st"><span class="st"><span class="st"></span></span></span><br>
<div>
<span class="st"><span class="st"><span class="st"><span class="st"><span class="st"></span></span></span><br>
</span></span><br>
<div>
<span class="st"><span class="st"><span class="st"><span class="st"><span class="st">arg8: <a href="http://docs.opencv.org/modules/core/doc/basic_structures.html#TermCriteria" target="_blank">termination criteria</a></span></span></span></span></span></div>
<span class="st">
</span></div>
<span class="st"><br></span><span class="st"><span class="st">3. example</span><br>
<span class="st"><br></span>
</span><br>
<div class="separator" style="clear: both; text-align: center;">
<span class="st"><object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="https://ytimg.googleusercontent.com/vi/1m0Yu9xHbkc/0.jpg" height="266" width="320"><param name="movie" value="https://www.youtube.com/v/1m0Yu9xHbkc?version=3&amp;f=user_uploads&amp;c=google-webdrive-0&amp;app=youtube_gdata"><param name="bgcolor" value="#FFFFFF"><param name="allowFullScreen" value="true"><embed src="AR.Drone%20Development_fichiers/1m0Yu9xHbkc.swf" type="application/x-shockwave-flash" allowfullscreen="true" wmode="opaque" height="266" width="320"></object></span></div>
<span class="st">
</span>
<br>
<div>
<span class="st"><span class="st"><br></span></span></div>
<span class="st">
</span><span class="st"></span>
<div>
<span class="st"><span class="st"><span class="st"><br></span></span></span></div>
<span class="st">
Here is a video of sample program. Green points are original synthetic 
object points, red points are their observation, and white points are 
optimized points. The entire coordinate is somewhat transformed there 
for the not a single camera coordinate is not same as its true camera 
coordinate. but the structure of object points are recovered well. 
Bellow is the source code of this sample. Point Cloud Library is used 
for visualization.</span><br>
<div>
<br></div>
<div>
<a href="https://docs.google.com/open?id=0B87Vcv-P5feSR1dBNENpUWt4dzQ" target="_blank">code</a><br>
<div>
<br>
<div>
<span class="st"><span class="st"><br></span></span></div>
<div>
<span class="st"><span class="st"><br></span></span></div>
</div>
</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-11-14T05:32:00.001Z" itemprop="datePublished">14th November 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/02615078735457265297" rel="author" itemprop="author">mthrok</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_0" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/opencv-levmarqsparse-class-for-sparse_13.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="OpenCV LevMarqSparse class for Sparse Bundle Adjustment"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton.html" name="I0_1372663375700" id="I0_1372663375700" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/opencv-levmarqsparse-class-for-sparse_13.html" data-count="" data-size="" data-text="OpenCV LevMarqSparse class for Sparse Bundle Adjustment"><iframe src="AR.Drone%20Development_fichiers/tweet_button.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/opencv-levmarqsparse-class-for-sparse_13.html" data-count="" data-layout="" data-text="OpenCV LevMarqSparse class for Sparse Bundle Adjustment"><iframe src="AR.Drone%20Development_fichiers/like.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="27 comments">
  <span class="bubble-content">27</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="3040566199718160048">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=3040566199718160048" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="5643430090316061714">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="//img.youtube.com/vi/VKqqGHG1G9w/0.jpg">
    <meta itemprop="thumbnailUrl" content="//img.youtube.com/vi/VKqqGHG1G9w/0.jpg">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="5643430090316061714">

  
  <div class="article-header">


<a class="ribbon date " title="7th November 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/3-integration.html" itemprop="url">


  <div class="top ribbon-piece">Nov</div>
  <div class="bottom ribbon-piece">7</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/3-integration.html" rel="bookmark" itemprop="url">



3. Integration</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=5643430090316061714&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody">&nbsp;
 &nbsp; It's been a while since the last update, and it's interesting to
 review my own code from few month ago through exchanging with some 
readers. I almost knew nothing about programming since I was returning 
non-zero value when main functions are terminated normally, but now I 
can do something a bit more complex than what I was doing at that time.<br>
<br>
&nbsp; &nbsp; So, I wrapped up the codes from previous posts and 
integrated in one program and add some features to modify setting, 
control drone, calibrate magneto meters, trim gyro sensors, take photos 
and record video. Here is what it looks like.<br>
<br>
<div class="separator" style="clear: both; text-align: center;">
<object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="http://i.ytimg.com/vi/VKqqGHG1G9w/0.jpg" height="266" width="320"><param name="movie" value="http://www.youtube.com/v/VKqqGHG1G9w?version=3&amp;f=user_uploads&amp;c=google-webdrive-0&amp;app=youtube_gdata"><param name="bgcolor" value="#FFFFFF"><param name="allowFullScreen" value="true"><embed src="AR.Drone%20Development_fichiers/VKqqGHG1G9w.swf" type="application/x-shockwave-flash" allowfullscreen="true" wmode="opaque" height="266" width="320"></object></div>
<br>
<br>
The incoming video is processed with Canny Edge Detection with OpenCV and recorded with ffmpeg.<br>
<br>
<div class="separator" style="clear: both; text-align: center;">
<object class="BLOGGER-youtube-video" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" data-thumbnail-src="http://i.ytimg.com/vi/Ak6uhDww7ec/0.jpg" height="266" width="320"><param name="movie" value="http://www.youtube.com/v/Ak6uhDww7ec?version=3&amp;f=user_uploads&amp;c=google-webdrive-0&amp;app=youtube_gdata"><param name="bgcolor" value="#FFFFFF"><param name="allowFullScreen" value="true"><embed src="AR.Drone%20Development_fichiers/Ak6uhDww7ec.swf" type="application/x-shockwave-flash" allowfullscreen="true" wmode="opaque" height="266" width="320"></object></div>
<br>
&nbsp; &nbsp; To handle navdata, command, video displaying, image 
processing, and keyboard input, I used boost thread library. I followed 
the 5th way to encapsulate thread object explained <a href="http://antonym.org/2009/05/threading-with-boost---part-i-creating-threads.html" target="_blank">here</a>.
 I think I have to implement mutex concept to avoid data access 
conflict, but, it's not done yet. I felt Boost documentation was not 
kind enough for newbie like me, so I postponed it until it becomes 
absolutely necessary. (In that sense AR.Drone SDK, OpenCV, SDL, any of 
them were never kind to beginners, especially AR.Drone Developer's 
manual which includes a lot of typo including wrong control command 
explanation.)<br>
<br>
&nbsp; &nbsp; Unlike the amount of time required to implement this or 
the amount of the improvement I felt during this work, there are not so 
many things to talk here. So I just post the link to the&nbsp;<a href="https://docs.google.com/file/d/0B87Vcv-P5feST0thVk52bmFBYWc/edit" rel="nofollow" style="text-align: center;" target="_blank">sorce code</a>. So enjoy!!<br>
<span style="text-align: left;"><br></span>
<span style="text-align: left;">*default key mapping:</span><br>
<span style="text-align: left;"></span><br>
<div style="text-align: -webkit-auto;">
<span style="text-align: left;">Keypad_8:<span class="Apple-tab-span" style="white-space: pre;"> </span>ascend</span></div>
<div style="text-align: -webkit-auto;">
<div>
<span style="text-align: left;">Keypad_2:<span class="Apple-tab-span" style="white-space: pre;"> </span>descend</span></div>
<div>
<span style="text-align: left;">Keypad_5:<span class="Apple-tab-span" style="white-space: pre;"> </span>move forward</span></div>
<div>
<span style="text-align: left;">Keypad_3:<span class="Apple-tab-span" style="white-space: pre;"> </span>move backward</span></div>
<div>
<span style="text-align: left;">Keypad_4:<span class="Apple-tab-span" style="white-space: pre;"> </span>move left</span></div>
<div>
<span style="text-align: left;">Keypad_6:<span class="Apple-tab-span" style="white-space: pre;"> </span>move right</span></div>
<div>
<span style="text-align: left;">Keypad_7:<span class="Apple-tab-span" style="white-space: pre;"> </span>turn&nbsp;left</span></div>
<div>
<span style="text-align: left;">Keypad_9:<span class="Apple-tab-span" style="white-space: pre;"> </span>turn&nbsp;right</span><br>
<span style="text-align: left;"><br></span></div>
</div>
<br>
<div>
If multiple of following keys are pressed, processed in the following order.</div>
<span style="text-align: left;">ESC:</span><span class="Apple-tab-span" style="white-space: pre;"> </span><span style="text-align: left;">land drone and terminate the program.</span><br>
<span style="text-align: left;">r:</span><span class="Apple-tab-span" style="white-space: pre;"> </span>reset emergency mode<br>
s:<span class="Apple-tab-span" style="white-space: pre;"> </span>save unprocessed image<br>
<div>
v:<span class="Apple-tab-span" style="white-space: pre;"> </span>toggle&nbsp;video recording flag<br>
Backspaces:<span class="Apple-tab-span" style="white-space: pre;"> </span>trim gyro sensors (works only when drone is landed)</div>
<div>
Space:<span class="Apple-tab-span" style="white-space: pre;"> </span>land</div>
<div>
<div>
t:<span class="Apple-tab-span" style="white-space: pre;"> </span>toggle absolute control mode</div>
<div>
<div>
y:<span class="Apple-tab-span" style="white-space: pre;"> </span>toggle combined yaw mode</div>
<div>
<div>
c:<span class="Apple-tab-span" style="white-space: pre;"> </span>calibrate magneto meter (works only when drone is in the air)</div>
</div>
<div>
<div>
Enter:<span class="Apple-tab-span" style="white-space: pre;"> </span>take off</div>
</div>
</div>
</div>
<div>
<div>
<div>
<div>
<div>
<br></div>
<div>
You can change settings by changing video.hpp line 425 to 470 with <a href="http://wiki.libsdl.org/moin.cgi/SDL_Keycode">SDL keycode</a>.</div>
<div>
<br></div>
<div>
<br></div>
</div>
</div>
</div>
</div>
<br>
<span style="text-align: left;">*if the code above does not work 
(especially when it clashed when SDL window is opened), check 
&nbsp;ffmpeg and related library version. I am using&nbsp;</span><br>
<div style="text-align: left;">
<br></div>
<div style="text-align: left;">
</div>
&nbsp; libavutil &nbsp; &nbsp; &nbsp;51. 69.100 / 51. 69.100<br>
&nbsp; libavcodec &nbsp; &nbsp; 54. 52.100 / 54. 52.100<br>
&nbsp; libavformat &nbsp; &nbsp;54. 23.100 / 54. 23.100<br>
&nbsp; libavdevice &nbsp; &nbsp;54. &nbsp;2.100 / 54. &nbsp;2.100<br>
&nbsp; libavfilter &nbsp; &nbsp; 3. &nbsp;9.100 / &nbsp;3. &nbsp;9.100<br>
&nbsp; libswscale &nbsp; &nbsp; &nbsp;2. &nbsp;1.101 / &nbsp;2. &nbsp;1.101<br>
&nbsp; libswresample &nbsp; 0. 15.100 / &nbsp;0. 15.100<br>
&nbsp; libpostproc &nbsp; &nbsp;52. &nbsp;0.100 / 52. &nbsp;0.100<br>
<div>
<br></div>
<div>
and it especially feels that libavutil can not be the one distributed from apt-get, nor the latest one(why?). In that case use <a href="https://docs.google.com/file/d/0B87Vcv-P5feSdDVFTUduSHBwZEU/edit" rel="nofollow" target="_blank">the version I am using.</a>&nbsp;&nbsp;</div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-11-07T09:58:00.001Z" itemprop="datePublished">7th November 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/02615078735457265297" rel="author" itemprop="author">mthrok</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_1" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/3-integration.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="3. Integration"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton_002.html" name="I1_1372663437658" id="I1_1372663437658" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/3-integration.html" data-count="" data-size="" data-text="3. Integration"><iframe src="AR.Drone%20Development_fichiers/tweet_button_002.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/11/3-integration.html" data-count="" data-layout="" data-text="3. Integration"><iframe src="AR.Drone%20Development_fichiers/like_002.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="4 comments">
  <span class="bubble-content">4</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="5643430090316061714">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=5643430090316061714" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="7483109539009678932">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://3.bp.blogspot.com/-BH4AS2Exsus/UA_5xvqI3AI/AAAAAAAAAEM/7fteEb-APik/s400/Screenshot2.png">
    <meta itemprop="thumbnailUrl" content="http://3.bp.blogspot.com/-BH4AS2Exsus/UA_5xvqI3AI/AAAAAAAAAEM/7fteEb-APik/s400/Screenshot2.png">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="7483109539009678932">

  
  <div class="article-header">


<a class="ribbon date " title="25th July 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/212-ardrone-20-video-decording-ffmpeg.html" itemprop="url">


  <div class="top ribbon-piece">Jul</div>
  <div class="bottom ribbon-piece">25</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/212-ardrone-20-video-decording-ffmpeg.html" rel="bookmark" itemprop="url">



2.1.2 AR.Drone 2.0 Video Decording: FFMPEG + SDL2.0</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=7483109539009678932&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><a href="http://ardrone-ailab-u-tokyo.blogspot.jp/2012/07/211-ardrone-20-video-decording-compile.html" target="_blank">In the previous post</a>, I thought of customizing <i>ffplay</i>
 to play video stream from AR.Drone 2.0. However digging deeper into the
 source code, I concluded that it is rather simple and efficient to 
write from the scratch. So, I would like to share it here.<br>
<br>
You can read the basic tutorial on programming with ffmpeg and related audio visual libraries <a href="http://dranger.com/ffmpeg/" target="_blank">at dranger's page</a>.
 It is out-dated and the source codes do not work with recent libraries 
without modification, but it helps understanding how to decode videos.<br>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-BH4AS2Exsus/UA_5xvqI3AI/AAAAAAAAAEM/7fteEb-APik/s1600/Screenshot2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/Screenshot2.png" border="0" height="208" width="400"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">The YUV and RGB image we obtain from AR.Drone 2.0</td><td class="tr-caption" style="text-align: center;"><br></td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: center;">
<br></div>
<br>
<b>Step.1 Install latest ffmpeg</b><br>
I am using Ubuntu 10.04 and, as is mentioned before, ffmpeg and related 
libraries distributed via apt-get is not up-to-date and buggy. So we 
need to compile and install these libraries manually. The required step 
is same as <a href="http://ardrone-ailab-u-tokyo.blogspot.jp/2012/07/211-ardrone-20-video-decording-compile.html" target="_blank">the previous post,</a> so refer to it.<br>
<br>
<br>
<b>Srep.2 Install SDL 2.0</b><br>
ffmpeg uses SDL 1.2 not only for displaying the video, but also for 
decoding video/audio/subtitle concurrently in separate threads and 
synchronizing them. SDL multi threading is simpler than I thought (As I 
mentioned before, I am newbie to programming beyond school homework 
level, so cannot compare against other multi thread library such as 
Boost, and it feels like simple in this case means not powerful enough.)
 however, SDL 1.2 does not allow us to use multiple screen, and this 
might be troublesome for farther image processing with OpenCV. So we use
 SDL 2.0. Some of you might have noticed, that if we are going to use 
OpenCV for image processing, then we can use OpenCV for displaying 
purpose. Yes, it is true, but as OpenCV's highgui library is meant for 
tentative displaying purpose, displaying with OpenCV in such a way 
cv::imshow cv::waitKey is slow for our research, so we only use OpenCV 
for image processing.<br>
<br>
Download latest SDL2.0 <a href="http://www.libsdl.org/hg.php" target="_blank">from here</a>. Unarchive it and follow the instruction inside.<br>
<br>
<br>
<b>Step.3 Developing</b><br>
How to decode video (and audio) is described in detail step by step <a href="http://dranger.com/ffmpeg/" target="_blank">at dranger's page</a>, so I just describe the necessary step to decode video. <br>
<br>
<u>1.1. Register all formats and codecs</u><br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; av_register_all();&nbsp;</div>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; avcodec_register_all();</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; avformat_network_init();</span><br>
<br>
First thing we have to do is to prepare codecs that might be used. There
 said to be a way to register only necessary codecs, but why are we 
bothered to do so?<br>
<br>
<u>1.2. Open video file</u><br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br>
&nbsp; 
char&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 *drone_addr = "http://192.168.1.1:5555";<br>
&nbsp; AVFormatContext&nbsp;&nbsp; *pFormatCtx = NULL;&nbsp;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; while(avformat_open_input(&amp;pFormatCtx, drone_addr, NULL, NULL) != 0)&nbsp;</div>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; &nbsp; printf("Could not open the video file\nRetrying...\n");</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br></span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">avformat_open_input</span>
 tries to establish communication with AR.Drone 2.0 (and much more often
 fails than the case of AR.Drone 1. Probably because of TCP connection?)<br>
<br>
<u>1.3. Display information</u><br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // Retrieve stream information<br>
&nbsp; avformat_find_stream_info(pFormatCtx, NULL);<br>
&nbsp; // Dump information to standard output<br>
&nbsp; av_dump_format(pFormatCtx, 0, drone_addr, 0);</div>
<br>
You will see the decode information on standard output.<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">avformat_find_stream_info</span>
 returns negative value in case it cannot find appropriate codec 
parameter, but we know what is coming so we omit error handling here.<br>
<br>
<u>1.4. Find decoder </u><br>
<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // Get a pointer to the codec context for the video stream</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // and find the decoder for the video stream</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; AVCodecContext&nbsp;&nbsp;&nbsp; *pCodecCtx;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; AVCodec&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pCodec;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; pCodecCtx = pFormatCtx-&gt;streams[0]-&gt;codec;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; pCodec&nbsp;&nbsp;&nbsp; = avcodec_find_decoder(pCodecCtx-&gt;codec_id);</span><br>
<br>
error handling is omitted for the same reason.<br>
<br>
<u>1.5. Open codec</u><br>
<br>
&nbsp; <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">avcodec_open2(pCodecCtx, pCodec, NULL);</span><br>
<br>
Above five steps are the initialization step for decoding video.<br>
<br>
<u>1.6. Read, decode and convert frame</u><br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // get video frames</div>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; AVPacket&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; packet;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; AVFrame&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pFrame;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; pFrame = avcodec_alloc_frame();</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; int i, frameDecoded;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; for(i=0; i &lt; 100; i++) {</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; printf("loop:%d\n",i);</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; // read frame</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; if(av_read_frame(pFormatCtx, &amp;packet)&lt;0) {</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fprintf(stderr, "Could not read frame!\n");</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; }</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; </span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; // decode the frame</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; if(avcodec_decode_video2(pCodecCtx, pFrame, &amp;frameDecoded, &amp;packet) &lt; 0) {</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fprintf(stderr, "Could not decode frame!\n");</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; continue;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; }</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; </span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; if (frameDecoded) {</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // convert frame to GRAYSCALE [or <b>BGR</b>] for OpenCV</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 sws_scale(pConvertCtx_BGR24,&nbsp;&nbsp; 
pFrame-&gt;data,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
pFrame-&gt;linesize, 0,</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pCodecCtx-&gt;height,&nbsp;&nbsp; pFrame_BGR24-&gt;data,&nbsp;&nbsp; 
pFrame_BGR24-&gt;linesize);</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // convert frame to YUV for Displaying</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 sws_scale(pConvertCtx_YUV420P, 
pFrame-&gt;data,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
pFrame-&gt;linesize, 0,</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pCodecCtx-&gt;height,&nbsp;&nbsp; pFrame_YUV420P-&gt;data, 
pFrame_YUV420P-&gt;linesize);</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; }</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; }</span><br>
<br>
In this loop <i style="font-family: &quot;Courier New&quot;,Courier,monospace;">av_read_frame</i> (for reading a frame) and <i style="font-family: &quot;Courier New&quot;,Courier,monospace;">avcodec_decode_video2</i> (for decoding the frame) are used to get video data. If the frame is decoded correctly, the third argument of <i style="font-family: &quot;Courier New&quot;,Courier,monospace;">avcodec_decode_video2, </i>frameDecoded is set to 1 and we continue to further process, displaying with SDL and image processing with OpenCV.<br>
<br>
<u>2. Convert frame to other format</u><br>
<br>
To convert the decoded frame, we use libswscale.<br>
First, we allocate new AVFrame for the conversion frame.<br>
<br>
<div style="text-align: left;">
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; AVFrame&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pFrame_YUV420P;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; uint8_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *buffer_YUV420P;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // Allocate an AVFrame structure</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; pFrame_YUV420P = avcodec_alloc_frame();</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; if(pFrame_YUV420P == NULL) {</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; fprintf(stderr, "Could not allocate pFrame_YUV420P\n");</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; return -1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; }</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // Determine required buffer size and allocate buffer</span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;</span></div>
<div style="text-align: left;">
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; buffer_YUV420P = (uint8_t *)av_malloc(sizeof(uint8_t)*</span></div>
<div style="text-align: left;">
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 avpicture_get_size(PIX_FMT_YUV420P, pCodecCtx-&gt;width, 
pCodecCtx-&gt;height));&nbsp; </span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // Assign buffer to image planes</span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;</span></div>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; avpicture_fill((AVPicture *)pFrame_YUV420P, buffer_YUV420P,&nbsp;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">PIX_FMT_YUV420P, pCodecCtx-&gt;width, pCodecCtx-&gt;height);</span><br>
<br>
<br>
And then create conversion context.<br>
<br>
<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; struct SwsContext *pConvertCtx_YUV420P;</span><br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // format conversion context<br>
&nbsp; pConvertCtx_YUV420P = sws_getContext(</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pCodecCtx-&gt;width, pCodecCtx-&gt;height, pCodecCtx-&gt;pix_fmt, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pCodecCtx-&gt;width, pCodecCtx-&gt;height, PIX_FMT_YUV420P, </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 SWS_SPLINE, NULL, NULL, NULL);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br></div>
To convert to other formats, change PIX_FMT_YUV420P to PIX_FMT_RGB24 
(8-bit 3 channel in order : RGB ), PIX_FMT_BGR24 (8-bit 3 channel in 
order : BGR [can be handled with OpenCV]), PIX_FMT_GRAY8 (8-bit 1 
channel gray scale image [can be handled with OpenCV]). <br>
*Note, out of the formats mentioned here, only YUV420P has separate memory space allocated for each color component.<br>
<br>
<br>
<br>
<u>3. Displaying with SDL 2.0.</u><br>
<br>
First we have to initialize SDL as follow<br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; if (SDL_Init(SDL_INIT_VIDEO) &lt; 0) {<br>
&nbsp;&nbsp;&nbsp; fprintf(stderr, "Unable to init SDL: %s\n", SDL_GetError());<br>
&nbsp;&nbsp;&nbsp; return -1;<br>
&nbsp; }</div>
<br>
<a href="http://wiki.libsdl.org/moin.cgi/SDL_Init" target="_blank">Documentation</a>
 says this must be done before calling any other SDL function, but 
somehow calling this in the middle of program (of course before calling 
any other SDL function) caused segmentation fault when freeing <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">pCodecCtx </span>instantiated at <u>1.4.</u> by calling <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">avcodec_close(pCodecCtx);</span> (I am re-writing this program as I write this blog and it is sure that <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">avcodec_close(pCodecCtx);</span> works without <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">SDL_Init(SDL_INIT_VIDEO)</span> at the middle.) So this should be done at the very beginning of the program.<br>
<br>
Creating the window is done as follow.<br>
<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // 3.1.1 prepare SDL for YUV</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; SDL_Window&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pWindow1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; SDL_Renderer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pRenderer1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; SDL_Texture&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *bmpTex1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; uint8_t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *pixels1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pitch1, size1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; // allocate window, renderer, texture</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; pWindow1&nbsp;&nbsp;&nbsp; = SDL_CreateWindow( "YUV", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED,&nbsp;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pCodecCtx-&gt;width, pCodecCtx-&gt;height, SDL_WINDOW_SHOWN);&nbsp; </span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; pRenderer1&nbsp; = SDL_CreateRenderer(pWindow1, -1, SDL_RENDERER_ACCELERATED);</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; bmpTex1&nbsp;&nbsp;&nbsp;&nbsp; = SDL_CreateTexture(pRenderer1, SDL_PIXELFORMAT_YV12,&nbsp;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </span><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">SDL_TEXTUREACCESS_STREAMING, pCodecCtx-&gt;width, pCodecCtx-&gt;height);</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; size1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = pCodecCtx-&gt;width * pCodecCtx-&gt;height;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; if(pWindow1==NULL | pRenderer1==NULL | bmpTex1==NULL) {</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; fprintf(stderr, "Could not open window1\n");</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp; return -1;</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; }</span><br>
<br>
<span style="font-family: inherit;">For detail of each function, please refer to <a href="http://wiki.libsdl.org/moin.cgi/CategoryAPI" target="_blank">SDL 2.0 Wiki</a>.</span><br>
<br>
<span style="font-family: inherit;">To update screen, we copy the raw 
pixel data from AVFrame structure and via buffer uint8_t array to 
SDL_Texture. And then refresh screen with it.</span><br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // 3.1.2. copy converted YUV to SDL 2.0 texture<br>
&nbsp; SDL_LockTexture(bmpTex1, NULL, (void **)&amp;pixels1, &amp;pitch1);<br>
&nbsp;&nbsp;&nbsp; 
memcpy(pixels1,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pFrame_YUV420P-&gt;data[0], size1&nbsp; );<br>
&nbsp;&nbsp;&nbsp; memcpy(pixels1 + size1,&nbsp;&nbsp;&nbsp;&nbsp; pFrame_YUV420P-&gt;data[2], size1/4);<br>
&nbsp;&nbsp;&nbsp; memcpy(pixels1 + size1*5/4, pFrame_YUV420P-&gt;data[1], size1/4);<br>
&nbsp; SDL_UnlockTexture(bmpTex1);<br>
&nbsp; SDL_UpdateTexture(bmpTex1, NULL, pixels1, pitch1);<br>
&nbsp; // refresh screen<br>
&nbsp; SDL_RenderClear(pRenderer1);<br>
&nbsp; SDL_RenderCopy(pRenderer1, bmpTex1, NULL, NULL);<br>
&nbsp; SDL_RenderPresent(pRenderer1);</div>
<br>
<span style="font-family: inherit;">Here, </span>we manually copy the 
data since we know it's YUV420P format. In case of 8-bit 3 channel 
format, RGB or BGR, use SDL_PIXELFORMAT_BGR24 instead of <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">SDL_PIXELFORMAT_YV12 at window initialization, and copy all pixel data beginning from pFrame_BGR24-&gt;data[0]</span> at once as,<br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; SDL_LockTexture(bmpTex2, NULL, (void **)&amp;pixels2, &amp;pitch2);<br>
&nbsp;&nbsp;&nbsp; 
memcpy(pixels2,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 pFrame_BGR24-&gt;data[0], size2);<br>
&nbsp; SDL_UnlockTexture(bmpTex2);<br>
&nbsp; SDL_UpdateTexture(bmpTex2, NULL, pixels2, pitch2);</div>
<br>
<u>4. P</u><u>laying around with OpenCV</u><br>
<u><br></u><br>
First, we need a matrices to work with received picture.<br>
<u><br></u><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp; cv::Mat&nbsp;&nbsp; img(pCodecCtx-&gt;height, pCodecCtx-&gt;width, CV_8UC3, cv::Scalar(255));</span><br>
<u><br></u><br>
Later, we are going to separate threads, so it is better to allocate 
memory for storing pixel and copy the converted BGR (or Grayscale) image
 to the matrices. This can be done as follow.<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br></div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; memcpy( img0.data, pFrame_BGR24-&gt;data[0],&nbsp;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (pCodecCtx-&gt;width)*(pCodecCtx-&gt;height)*sizeof(uint8_t)*3);</div>
<br>
Each channel for each pixel needs one byte (8-bit) of memory, so if the 
image you are going to work is three channel, then the size you need to 
copy is three times the number of pixel [bytes] and if one channel, then
 the number of pixel [bytes].<br>
After image processing, copy the modified data back to the AVFrame. <br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br></div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; memcpy( pFrame_BGR24-&gt;data[0], img0.data,&nbsp;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (pCodecCtx-&gt;width)*(pCodecCtx-&gt;height)*sizeof(uint8_t)*3);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br></div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br></div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
<br></div>
<div style="font-family: inherit; text-align: center;">
<a href="https://docs.google.com/file/d/0B87Vcv-P5feSRXhLTVE4WjhNRU0/edit" rel="" target="_blank">Here is sample code.</a> </div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-07-25T13:55:00.001Z" itemprop="datePublished">25th July 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_2" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/212-ardrone-20-video-decording-ffmpeg.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="2.1.2 AR.Drone 2.0 Video Decording: FFMPEG + SDL2.0"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton_003.html" name="I2_1372663649159" id="I2_1372663649159" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/212-ardrone-20-video-decording-ffmpeg.html" data-count="" data-size="" data-text="2.1.2 AR.Drone 2.0 Video Decording: FFMPEG + SDL2.0"><iframe src="AR.Drone%20Development_fichiers/tweet_button_003.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/212-ardrone-20-video-decording-ffmpeg.html" data-count="" data-layout="" data-text="2.1.2 AR.Drone 2.0 Video Decording: FFMPEG + SDL2.0"><iframe src="AR.Drone%20Development_fichiers/like_003.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="40 comments">
  <span class="bubble-content">40</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="7483109539009678932">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=7483109539009678932" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="8608346066439054200">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://1.bp.blogspot.com/-MMWPJUVGZ6Y/T_kxDpZLoII/AAAAAAAAADk/SBIlEsH7GQ0/s400/Screenshot.png">
    <meta itemprop="thumbnailUrl" content="http://1.bp.blogspot.com/-MMWPJUVGZ6Y/T_kxDpZLoII/AAAAAAAAADk/SBIlEsH7GQ0/s400/Screenshot.png">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="8608346066439054200">

  
  <div class="article-header">


<a class="ribbon date " title="8th July 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/211-ardrone-20-video-decording-compile.html" itemprop="url">


  <div class="top ribbon-piece">Jul</div>
  <div class="bottom ribbon-piece">8</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/211-ardrone-20-video-decording-compile.html" rel="bookmark" itemprop="url">



2.1.1 AR.Drone 2.0 Video Decording: Compile ffplay</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=8608346066439054200&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody">This
 week, AR.Drone 2.0 is released in Japan and we received ours on the 
next day. The video stream quality is improved but I doubt it is good 
enough to claim HD quality. What I liked most about AR.Drone 2.0 
improvement is magnetic sensors that enables angle shift while moving 
towards the same direction in absolute control mode. I think this will 
open a new field of AR.Drone for UAV research.<br>
<br>
Anyways, regarding video decoding of AR.Drone 2.0, Parrot adopted MPEG-4
 codec and they do not give us enough explanation in SDK manual. 
Following <a href="https://projects.ardrone.org/boards/1/topics/show/4282" target="_blank">a discussion on API forum</a>, Dardo gave us his assumption and it makes sense.<br>
<br>
<h4 style="-webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: white; border-bottom-color: rgb(192, 192, 192); border-bottom-style: dotted; border-bottom-width: 1px; color: #606060; font-family: 'Trebuchet MS', Georgia, 'Times New Roman', serif; font-size: 13px; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; margin-bottom: 5px; orphans: 2; padding-bottom: 1px; padding-left: 0px; padding-right: 10px; padding-top: 2px; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">








RE: Ar.Drone 2.0 video data without the SDK? - Added by<span class="Apple-converted-space">&nbsp;</span><a href="https://projects.ardrone.org/account/show/15269" style="color: #467aa7; font-weight: bold; text-decoration: none;">Dardo Kleiner</a><span class="Apple-converted-space">&nbsp;</span><a href="https://projects.ardrone.org/projects/activity/ardrone-api?from=2012-06-24" style="color: #467aa7; font-weight: bold; text-decoration: none;" title="24-06-2012 03:23">14 days</a><span class="Apple-converted-space">&nbsp;</span>ago</h4>
<div class="wiki" style="-webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: white; color: #303030; font-family: Verdana, Tahoma, Arial, sans-serif; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: -webkit-auto; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">
tom sparks wrote:<br>
<blockquote style="border-left-color: rgb(224, 224, 224); border-left-style: solid; border-left-width: 3px; font-style: italic; margin-left: 2.4em; padding-left: 0.6em;">
that may be so, but h.264 has patents (<span class="Apple-converted-space">&nbsp;</span><a class="external" href="http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Patent_licensing" style="background-image: url(https://projects.ardrone.org/images/external.png); background-position: 0% 60%; background-repeat: no-repeat no-repeat; color: #467aa7; font-weight: bold; padding-left: 12px; text-decoration: none;">http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Patent_licensing</a><span class="Apple-converted-space">&nbsp;</span>), the P264 codec may just be different enough to escape the patents but still be compatible with h.264 decoders</blockquote>
I think they exactly avoid this problem by switching to TI's hardware 
DSP encoder for which I'm sure TI has paid licensing. And on the decoder
 side I'm saying they're going to leave it to the platform 
implementations instead of even messing with the hope of their own being
 different enough. Many Android platforms use the same TI tech, and you 
can be sure that Apple &amp; Microsoft have their ducks in a row wrt 
licensing for their implementations. IANAL, of course...<br>
<br></div>
Using conventional technique is easier than developing and maintaining 
their own technique, and that is also the case for us, since we can use 
open source library to decode. The discussion also gives us the starting
 point how to develop our own decoder, which is hopefully simple, easy 
and light to use. Following part is the summary of their discussion how 
to decode AR.Drone 2.0 video stream with FFMPEG library, and continues 
to my idea to develop our decorder program by modifying <i>ffplay</i>. You might be surprised how it is easy to get to the point you can see the drone's video stream on your computer's screen.<br>
<br>
<br>
<b>1. Install FFmpeg</b><br>
<br>
follow the instruction at&nbsp;<a href="http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide">http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide</a><br>
<br>
<span style="font-size: x-small;">*You may need to copy libavformat header files as,</span><br>
<span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">$ sudo cp -r /usr/local/include/libavformat /usr/include/libavformat/ </span></span><br>
<div style="color: red;">
**&nbsp; To use libavutil in C++: some modification is neede </div>
<a href="http://sirivy.wordpress.com/2010/10/14/just-a-note-to-solve-libavutilcommon-h154-error-%E2%80%98uint64_c%E2%80%99-was-not-declared-in-this-scope/">http://sirivy.wordpress.com/2010/10/14/just-a-note-to-solve-libavutilcommon-h154-error-%E2%80%98uint64_c%E2%80%99-was-not-declared-in-this-scope/</a> <br>
<br>
Add the following line at the beginning of libavutil/common.h<br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
#ifdef __cplusplus<br>
#define __STDC_CONSTANT_MACROS<br>
#ifdef _STDINT_H<br>
#undef _STDINT_H<br>
#endif<br>
# include &lt;stdint.h&gt;<br>
#endif</div>
<br>
otherwise you will encounter errors as follow when using libavutil in C++ <br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/usr/local/include/libavutil/common.h: In function ‘int32_t av_clipl_int32_c(int64_t)’:</span><br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">/usr/local/include/libavutil/common.h:173: error: ‘UINT64_C’ was not declared in this scope</span><br>
<br>
<b>2. Execute ffplay to decode AR.Drone 2.0</b><br>
<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ ffplay http://192.168.1.1:5555</div>
<br>
That's it. If installation went correctly, you will see some output on 
your terminal, including library versions and some warnings, and in few 
seconds, the video image from AR.Drone 2.0 should come up. If it says 
"Input/output error", then try again.<br>
<br>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-MMWPJUVGZ6Y/T_kxDpZLoII/AAAAAAAAADk/SBIlEsH7GQ0/s1600/Screenshot.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/Screenshot_002.png" border="0" height="346" width="400"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Output of ffplay</td></tr>
</tbody></table>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-Yb7KX_iPGJE/T_kzZZRZBmI/AAAAAAAAADs/kvlGXtrSmTA/s1600/Screenshot-1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/Screenshot-1.png" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">One frame from AR.Drone 2.0 video stream with ffplay<br>
(Original Size, no effect used)</td></tr>
</tbody></table>
<br>
<div style="text-align: center;">
BTW, if you compare it with a picture from AR.Drone, they truly are improved.</div>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-cZnMOKJ33lg/T_k1axcfF6I/AAAAAAAAAD0/S94iq2IMns0/s1600/clr0039.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/clr0039.jpg" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Same scene with AR.Drone (Original Size)<br>
(sharpened with difference of Gaussian technique<br>
with OpenCV)</td></tr>
</tbody></table>
<br>
<br>
<b>3. Look into ffplay</b><br>
<br>
ffplay is executable program written in C and since FFmpeg is open 
source, I'm guessing I might be able to modify ffplay, removing audio 
and unrelated codec part, integrating with command / navdata handling 
functions and also OpenCV algorithms. So let's start with finding a way 
to compile original ffplay with simple command line (so that newbie like
 me can understand).<br>
<br>
<br>
3.1. Download source<br>
<br>
Go to <a href="http://ffmpeg.org/download.html">http://ffmpeg.org/download.html</a><span id="goog_866150831"></span><span id="goog_866150832"></span> and download source code. In my case the downloaded file was named "ffmpeg-HEAD-dadfd2a.tar.gz".<br>
<br>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-XiU9qivioww/T_k7KM9CsjI/AAAAAAAAAEA/cDP6QcYKm-8/s1600/Screenshot-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/Screenshot-2.png" border="0" height="115" width="400"></a></div>
<br>
<br>
3.2. Build<br>
<br>
Unarchive the downloaded file and move to the folder.<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ tar -zxvf ffmpeg-HEAD-dadfd2a.tar.gz</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ cd ffmpeg-HEAD-dadfd2a</div>
<br>
Configure and make all<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ ./configure</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ sudo make</div>
<br>
ffmpeg ffprove, ffserver and related libraries such as libavcodec, 
libavdevice, libavfilter, libavformat, libavresample, libavutil, 
libpostproc, libswresample, libswscale, cmdutil.o are generated along 
with ffplay.<br>
<br>
<br>
3.3 Compile ffplay separately<br>
<br>
Now that you can decode video stream with ffplay just built by typing,<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$./ffplay 192.168.1.1:5555</div>
<br>
and since we would like to modify the source code of ffplay, we need to 
be able to compile ffplay separately. Looking into makefiles used to 
build libraries ( Makefile, common.mak, config.mak ), we can see that 
the command to generate ffplay is such<br>
<br>
# compile ffplay.c and cmdutils.c (assuming libraries are built already)<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ cc -I. -I./ -I/usr/include/SDL -c -o ffplay.o&nbsp;&nbsp; ffplay.c </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ cc -I. -I./ -I/usr/include/SDL -c -o cmdutils.o cmdutils.c </div>
<br>
# link objects together<br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
$ gcc -Llibavcodec -Llibavdevice -Llibavfilter -Llibavformat 
-Llibavresample -Llibavutil -Llibpostproc -Llibswscale -Llibswresample 
-Wl,--as-needed -Wl,--warn-common 
-Wl,-rpath-link=libpostproc:libswresample:libswscale:libavfilter:libavdevice:libavformat:libavcodec:libavutil:libavresample
 -o ffplay_g ffplay.o cmdutils.o -lavdevice -lavfilter -lavformat 
-lavcodec -lswresample -lswscale -lavutil -ldl -lasound -lSDL -lm 
-pthread -lbz2 -lz -lrt -lSDL</div>
<br>
# discard symbols from executable file so that the size of ffplay becomes smaller<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">$ strip ffplay</span><br>
<br>
<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"></span># discard symbols from executable file so that the size of ffplay becomes smaller<br>
<br>
Since we are not intended to modify other files such as cmdutils.c and 
libraries, we can do the same thing with following commands<br>
# compile and link ffplay <br>
<b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">$
 gcc&nbsp; -I. -I./ -I/usr/include/SDL -Llibavcodec -Llibavdevice 
-Llibavfilter -Llibavformat -Llibavresample -Llibavutil -Llibpostproc 
-Llibswscale -Llibswresample -o ffplay ffplay.c cmdutils.c -lavdevice 
-lavfilter -lavformat -lavcodec -lswresample -lswscale -lavutil -ldl 
-lasound -lSDL -lm -pthread -lbz2 -lz -lrt -lSDL</span></b><br>
# discard symbols<br>
$ strip ffplay<br>
<br>
GNU C Compiler's -I option adds path to the top of the search path list,
 so in this case, default av libraries which is located in /usr/lib/ and
 /usr/include/ are not used, but the libraries build in previous step 
are. ffplay includes a library called libswresample, but there does not 
seem to exist such library in /usr/include/ or /usr/lib/ even if we 
install the manually built libraries. So for now we have to keep, this 
folder and we cannot simplify the separate compile command of ffplay.<br>
<br>
We are now ready to look into ffplay source code. We will post as soon as we could make something out of it.</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-07-08T12:25:00.001Z" itemprop="datePublished">8th July 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_3" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/211-ardrone-20-video-decording-compile.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="2.1.1 AR.Drone 2.0 Video Decording: Compile ffplay"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton_004.html" name="I3_1372664120945" id="I3_1372664120945" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/211-ardrone-20-video-decording-compile.html" data-count="" data-size="" data-text="2.1.1 AR.Drone 2.0 Video Decording: Compile ffplay"><iframe src="AR.Drone%20Development_fichiers/tweet_button_004.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/211-ardrone-20-video-decording-compile.html" data-count="" data-layout="" data-text="2.1.1 AR.Drone 2.0 Video Decording: Compile ffplay"><iframe src="AR.Drone%20Development_fichiers/like_004.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="2 comments">
  <span class="bubble-content">2</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    View comments
    
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="8608346066439054200">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=8608346066439054200" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="4630410957912802377">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://3.bp.blogspot.com/-G3dBYmvaPD0/T_CehlgVATI/AAAAAAAAACA/pTb6-aQVOwQ/s1600/figure.2.1.png">
    <meta itemprop="thumbnailUrl" content="http://3.bp.blogspot.com/-G3dBYmvaPD0/T_CehlgVATI/AAAAAAAAACA/pTb6-aQVOwQ/s1600/figure.2.1.png">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="4630410957912802377">

  
  <div class="article-header">


<a class="ribbon date " title="2nd July 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/133-receive-and-decode-video-stream.html" itemprop="url">


  <div class="top ribbon-piece">Jul</div>
  <div class="bottom ribbon-piece">2</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/133-receive-and-decode-video-stream.html" rel="bookmark" itemprop="url">



1.3.3 Receive and Decode Video Stream Part.3: Decode binary stream</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=4630410957912802377&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div class="separator" style="clear: both; text-align: left;">
Once you could read binary video stream, you can decode it. The overall video stream structure is as follow.</div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-G3dBYmvaPD0/T_CehlgVATI/AAAAAAAAACA/pTb6-aQVOwQ/s1600/figure.2.1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_008.png" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Fig.1 Video Stream Structure</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
The stream starts with picture header and it contains GOB information at
 the same time so the GOB header for GOB#0 is omitted. After GOB#0 data,
 some number of zeros are inserted so that the next GOB starts at the 
first bit of new element of unsigned 32-bit array.</div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
The content of picture header is explained in Developers Guide as follow. Note that we are only considering the case of UVLC.</div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-uzFubnsExdM/T_ELjPUFvTI/AAAAAAAAACM/6ndRldWl0KE/s1600/figure.2.2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_006.png" border="0" height="71" width="400"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.2 Picture Header</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
Picture Start Code (PSC) in picture header and GOB Start Code (GOBSC) in
 each of GOB header shares the same coherent numbering, so PSC<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"> is always&nbsp;<span style="font-size: 11pt;">0000 0000 0000 0000 1000 </span><span style="font-size: 11pt;">00 and GOBSC are&nbsp;</span><span style="font-size: 11pt;">0000 0000 0000 0000 1000&nbsp;</span><span style="font-size: 11pt;">01 ~&nbsp;</span><span style="font-size: 11pt;">0000 0000 0000 0000 1000 </span><span style="font-size: 11pt;">14.
 Picture Format, Picture Resolution, and Picture Types are always fixed 
to the same numbers, so we can leave them as they are. 5-bit Picture 
Quantizer is the <i>q</i> value of quantization explained <a href="http://ardrone-ailab-u-tokyo.blogspot.jp/2012/07/131-receive-and-decode-video-stream.html" target="_blank">here</a>. <b><span class="Apple-style-span" style="color: red;">Developers Guide says "</span></b></span></span><span class="Apple-style-span" style="color: red;"><span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px; font-weight: bold;">The PQUANT code is a 5-bits-long word. The quantizer’s reference for the pic</span><span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px; font-weight: bold;">ture that range from 1 to 30.</span></span><span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><span style="font-size: 11pt;"><b><span class="Apple-style-span" style="color: red;">" But this is not correct.</span> </b>Since after running my own video decoder for hours, I saw&nbsp;</span></span><span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;">PQUANT
 value is always fixed to 31 (However automatic bitrate adjustment was 
always turned off, so those who are going to use autobitrate might have 
to care.) I am guessing that since the video is sent in the best 
quality, (<a href="http://ardrone-ailab-u-tokyo.blogspot.jp/2012/07/131-receive-and-decode-video-stream.html" target="_blank">the picture of Yoshi</a>
 is the example) so PQUANT must be its lowest, that is 1. So actual 
PQUANT value from AR.Drone is (32-PQUANT). Picture Frame Number is 
incremental counter and set to zero every time AR.Drone is turned on.</span></div>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;"><br></span></div>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;">After
 picture header comes the content of the first GOB, GOB#0. Again, the 
same information as GOB header is included in picture header, so GOB #0 
header is omitted. GOB content is composed of 20 macroblocks.&nbsp;</span></div>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;"><br></span></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-Or0odPAVQXI/T_E-2kG1YRI/AAAAAAAAACY/kgYv1aKesfU/s1600/figure.2.3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_003.png" border="0" height="27" width="200"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.3 GOB data</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;"><br></span></div>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;">Each macroblock has header and actual image data stored as blocks Y0, Y1, Y2, Y3, U0 and V0.</span></div>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;"><br></span></div>
<div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;"><br></span></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-ecSvHSzCQSU/T_FM7pg7K-I/AAAAAAAAACw/5anQOgROSm0/s1600/figure.2.4.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_010.png" border="0" height="40" width="320"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.4 Macroblock Content</td></tr>
</tbody></table>
<div style="text-align: center;">
<br></div>
<div>
<span class="Apple-style-span" style="font-family: CMMI10; font-size: 15px;">MBC
 indicates if there is non-zero value block in this macroblock. If this 
bit is not set, you can move onto the next macroblock.&nbsp;</span><span class="Apple-style-span" style="font-family: CMMI10; font-size: 15px;"><b><span class="Apple-style-span" style="color: red;">*IMPORTANT*
 Developer Guide says MBC being 1 means there are some blocks that has 
non-zero values, but actually it's opposite, MBC=0 means there is macro 
block content to be decoded.</span> </b>MBDES indicates which block has 
AC value (DC is the bias term of Discrete Cosine Transform and AC is the
 other coefficients.), and also indicates if the block is encoded with 
differential quantization, but it is not currently (and probably never, 
since AR.Drone 2.0 is out now) implemented we can ignore this and 
following MBDIFF bits.&nbsp;</span></div>
<div>
<span class="Apple-style-span" style="font-family: CMMI10; font-size: 15px;"><br></span></div>
<div>
<span class="Apple-style-span" style="font-family: CMMI10; font-size: 15px;">MBDES
 bits are bit ordered (not sure if this term is technically correct, so 
see the following example), so intuitively reverse ordered than bits we 
decoded so far. For example we received such macroblock header as, </span><span class="Apple-style-span" style="font-family: CMMI10; font-size: 15px;">010001011,
 the first 0 is MBC meaning that there is block data to be decoded, and 
following 10001011 means, reading from right digit, Y0 and Y1 block has 
AC value (1 1), Y2 does not (0), Y3 does (1), U0 and V0 do not have AC 
values (0 0), differential quantization is not used (0), and the first 
bit is always 1.</span></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-o8yv2JCmHNQ/T_FTjed3h-I/AAAAAAAAAC8/wZTJ4yP_400/s1600/figure.2.5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_002.png" border="0" height="169" width="200"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.5 Macroblock Description Code</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
If bit7 should be 1, then &nbsp;you have to read 2 more MBDIFF bits before decoding YUV blocks.</div>
<div class="separator" style="clear: both; text-align: left;">
Each YUV block can be decoded in the manner described in <a href="http://ardrone-ailab-u-tokyo.blogspot.jp/2012/07/131-receive-and-decode-video-stream.html" target="_blank">my previous post</a>. Again the sample binary stream of Developer Guide is not coherent, so take care when you test your decoder.</div>
<div>
<span class="Apple-style-span" style="font-family: CMMI10;"><span class="Apple-style-span" style="font-size: 15px;"><br></span></span><div class="separator" style="clear: both; text-align: left;">
<span class="Apple-style-span" style="font-family: URWPalladioL; font-size: 15px;">One
 more thing you have to know and is not written in Developer Guide is 
that each GOB header (for GOB#1~14 ) starts in new 32 bit array, so 
there are many zeros inserted between the last bit of V0 block content 
and the next GOB header.</span></div>
<span style="font-size: 11pt;"><div style="font-family: CMMI10;">
<br></div>
<div style="font-family: CMMI10;">
GOB header contains Start Code (22 bits) and Quantizer value (5 bits) in the same way as picture header does.</div>
<div style="font-family: CMMI10;">
<br></div>
<div style="font-family: CMMI10;">
The simple C video decoder I coded by modifying official API is attached
 below. For displaying the image decoded, I used OpenCV, so you need to 
install OpenCV in to your system, then compile it with&nbsp;</div>
<div style="font-family: CMMI10;">
<br></div>
<div>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">$ gcc testDrone_video.c 'pkg-config --cflags --libs opencv'</span></div>
<div>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br></span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;">and run giving the IP address of AR.Drone as command line argument.</span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
</span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace; font-size: 15px;">$&nbsp;./a.out 192.168.1.1</span><span style="font-size: 11pt;"><div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;">You will see RGB colour (3 channel) and grayscale (1 channel) images.</span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-izivxmtI4h4/T_FY8HF1LzI/AAAAAAAAADI/otVY92avS54/s1600/Screenshot.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/Screenshot.png" border="0" height="339" width="640"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Sample Decoding</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: center;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
<a href="https://docs.google.com/open?id=0BzZCYKEBtC4lNERvVEFnaVpmU1E">testDrone_video.tar.gz</a></div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
One thing to be reminded is that, for YUV-&gt;RGB conversion, we used the equation found in <a href="http://en.wikipedia.org/wiki/YUV#Y.27UV444_to_RGB888_conversion">Wikipedia</a> and&nbsp;</div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-7B7i2bC_FAg/T_FaZzObV7I/AAAAAAAAADQ/u9vVZ4xY0Bc/s1600/figure2.6.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure2.png" border="0" height="86" width="640"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.6 YUV to RGB conversion<br><a href="http://en.wikipedia.org/wiki/YUV#Y.27UV444_to_RGB888_conversion">http://en.wikipedia.org/wiki/YUV#Y.27UV444_to_RGB888_conversion</a></td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
The offset for chroma value is 128, but that was not the case for 
AR.Drone and we used 80. You can change this value defined in video.h 
file.</div>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
<div class="separator" style="clear: both; text-align: left;">
By integrating OpenCV, we can use many cool image processing algorithm.&nbsp;</div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;">Below is an ORB feature detection implementation.</span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-Uny9sgk98U4/T_Fcrkw61UI/AAAAAAAAADY/HILUleszbgk/s1600/detection0009.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/detection0009.jpg" border="0" height="150" width="400"></a></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
</span></div></div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-07-02T08:33:00.002Z" itemprop="datePublished">2nd July 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_4" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/133-receive-and-decode-video-stream.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="1.3.3 Receive and Decode Video Stream Part.3: Decode binary stream"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton_005.html" name="I4_1372664508455" id="I4_1372664508455" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/133-receive-and-decode-video-stream.html" data-count="" data-size="" data-text="1.3.3 Receive and Decode Video Stream Part.3: Decode binary stream"><iframe src="AR.Drone%20Development_fichiers/tweet_button_005.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/133-receive-and-decode-video-stream.html" data-count="" data-layout="" data-text="1.3.3 Receive and Decode Video Stream Part.3: Decode binary stream"><iframe src="AR.Drone%20Development_fichiers/like_005.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="4630410957912802377">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=4630410957912802377" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="4048599836569593129">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="4048599836569593129">

  
  <div class="article-header">


<a class="ribbon date " title="1st July 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/132-receive-and-decode-video-stream.html" itemprop="url">


  <div class="top ribbon-piece">Jul</div>
  <div class="bottom ribbon-piece">1</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/132-receive-and-decode-video-stream.html" rel="bookmark" itemprop="url">



1.3.2 Receive and Decode Video Stream Part.2: How to read binary stream</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=4048599836569593129&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody">To 
receive video stream from AR.Drone, simply send one&nbsp;UDP&nbsp;packet
 to its port 5555. The video stream is stored as 32-bit array and sent 
over network with little endian. So declare unsigned 32-bit array as 
follow,<br>
<br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">uint32_t bufferedVideoStream[10000];</span><br>
<br>
and receive video stream with <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">recvfrom</span><span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;">&nbsp;function</span>. The following code will display binary video stream as explained in Developer Guide.<br>
<br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">int i, j;</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">for (j=0;j&lt;receivedvideosizeinbyte/4;j++) {</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;for (i=31; i&gt;=0; i--) {</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;printf("%d", (bufferedVideoStream[j]&amp;(1&lt;&lt;i))!=0);</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;}</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">}</span><br>
<br>
If you dump the network packet sent from AR.Drone with software such as 
Wireshark, and save a UDP in C array style&nbsp;( you can download 
sample dumped file from&nbsp;<a href="https://projects.ardrone.org/attachments/222/ardrone_video_frame1.raw" rel="nofollow" target="_blank">API forum</a>&nbsp;) ,&nbsp;you will see the first few values are such [in hex].<br>
<br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">0x43, 0x82, 0x00, 0x00, 0x0d, 0x0a, 0x00, 0xe0, 0x0f, 0xe2, 0xf4, 0xcd, 0xce, 0x92 ...</span><br>
<br>
AR.Drone sends data as series of 32-bit word, and each 8 bits are 
aligned reverse ordering (little endien). (I am just a university 
student and not professional programmer and also not good at English, so
 these terms may be wrong, and if you find a mistake, please let me 
know.)<br>
To interpret these values as binary video stream as explained in AR.Drone Developer Guide, convert the address of array,&nbsp;<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">bufferedVideoStream</span>&nbsp;to 8-bit array display in the order each 4 elements are reverse ordered.<br>
<br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">uint8_t* long2char = (</span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">uint8_t*</span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">)bufferedVideoStream;</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">printf("%x %x %x %x", long2char[3], long2char[2], long2char[1], long2char[0]);</span><br>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span><br>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;">The result would look like,&nbsp;</span><br>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp;00 &nbsp; &nbsp; &nbsp; &nbsp; 00 &nbsp; &nbsp; &nbsp; &nbsp; 82 &nbsp; &nbsp; &nbsp; &nbsp; 43</span><br>
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">0000 0000 &nbsp;0000 0000 &nbsp;1000 0010 &nbsp;0100 0011</span><br>
<br>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br></span></div>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp;e0 &nbsp; &nbsp; &nbsp; &nbsp; 00 &nbsp; &nbsp; &nbsp; &nbsp; 03 &nbsp; &nbsp; &nbsp; &nbsp; 3c</span></div>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">1110 0000 &nbsp;0000 0000 &nbsp;0000 0011 &nbsp;0011 1100</span></div>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br></span></div>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp;6b &nbsp; &nbsp; &nbsp; &nbsp; f2 &nbsp; &nbsp; &nbsp; &nbsp; dd &nbsp; &nbsp; &nbsp; &nbsp; a9</span></div>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">0110 1011 &nbsp;1111 0010 &nbsp;1101 1101 &nbsp;1010 1001</span></div>
<div>
<span class="Apple-style-span" style="font-family: Times, 'Times New Roman', serif;"><br></span></div>
<div style="font-family: Times, 'Times New Roman', serif;">
Once you could read those binary streams, then you can start decoding from reading picture header.</div></div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-07-01T18:30:00.001Z" itemprop="datePublished">1st July 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_5" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/132-receive-and-decode-video-stream.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="1.3.2 Receive and Decode Video Stream Part.2: How to read binary stream"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton_006.html" name="I5_1372664614618" id="I5_1372664614618" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/132-receive-and-decode-video-stream.html" data-count="" data-size="" data-text="1.3.2 Receive and Decode Video Stream Part.2: How to read binary stream"><iframe src="AR.Drone%20Development_fichiers/tweet_button_006.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/132-receive-and-decode-video-stream.html" data-count="" data-layout="" data-text="1.3.2 Receive and Decode Video Stream Part.2: How to read binary stream"><iframe src="AR.Drone%20Development_fichiers/like_006.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="4048599836569593129">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=4048599836569593129" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="4943832487949859554">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://1.bp.blogspot.com/-antVCKNQDeo/T_BvHd6qNgI/AAAAAAAAAA8/evMsq0DOri0/s640/figure.1.png">
    <meta itemprop="thumbnailUrl" content="http://1.bp.blogspot.com/-antVCKNQDeo/T_BvHd6qNgI/AAAAAAAAAA8/evMsq0DOri0/s640/figure.1.png">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="4943832487949859554">

  
  <div class="article-header">


<a class="ribbon date " title="1st July 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/131-receive-and-decode-video-stream.html" itemprop="url">


  <div class="top ribbon-piece">Jul</div>
  <div class="bottom ribbon-piece">1</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/131-receive-and-decode-video-stream.html" rel="bookmark" itemprop="url">



1.3.1 Receive and Decode Video Stream Part.1: How the video is encoded</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=4943832487949859554&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody">Receiving
 navdata is also the first step of receiving video stream, but decoding 
the video stream requires more effort, because there are a lot of things
 we need to know to decode the image but are not written in the 
reference manual, or because the manual is wrong. We referred SDK 
reference 1.7.<br>
<br>
The video stream is sent in a jpg-like format. The picture is first 
split in 15 groups of blocks (GOB). Each of GOB consisting of 16x320 
pixel parts is then split into 20 16x16 Macroblolcks. Figure.1 
illustrates this. Each 16x16 Macroblock is then covered into 8x8 blocks 
using YUV 4:2:0 conversion, that is, 4 8x8 blocks of grayscale, and 
scaled-down&nbsp;Cb/Cr&nbsp;chroma components. (See Figure.2).<br>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-antVCKNQDeo/T_BvHd6qNgI/AAAAAAAAAA8/evMsq0DOri0/s1600/figure.1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_011.png" border="0" height="256" width="640"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><br>
Figure.1 Decomposition into GOBs and Macroblocks</td></tr>
</tbody></table>
<br>
<div class="separator" style="clear: both; text-align: center;">
</div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-LlC5qSGsBpQ/T_BujVuCRkI/AAAAAAAAAA0/K_c9_-aZfM0/s1600/figure.2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure.png" border="0" height="93" width="400"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><br>
Figure.2 YUV 4:2:0 Conversion<br>
(YUV color is not accurate)</td></tr>
</tbody></table>
<br>
Each block is now 8x8 integer matrix and this matrix is converted with 
Discrete Cosine Transform. After spending hours on this, we are sure 
that one of &nbsp;DCT equation (or modified one) described in this 
section&nbsp;http://en.wikipedia.org/wiki/YUV#Y.27UV444_to_RGB888_conversion
 is used but not sure exactly which one is, but we will explain decoding
 process later so it will not be a problem. DCT decomposes series of 
values to series of coefficient of linear combination of cosine curves, 
and so pushes values towards upper row and left column leaving many 
elements lying middle to bottom right to zero. The values of most top 
rows or most left columns are called DC values and the rest are AC 
values. Figure.3 summarizes the decomposition process.<br>
<br>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-QpuK8wS9U-Q/T_B2DekX1nI/AAAAAAAAABI/PUXqfR3bnTc/s1600/figure.3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_009.png" border="0" height="443" width="640"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><br>
Figure.3 JPEG-like compression process<br>
This is taken from P.45 of&nbsp;AR.Drone SDK Developer Guide&nbsp;1.7</td></tr>
</tbody></table>
<br>
After DCT, the block is quantified by the following matrix. Each element
 of the block is divided by the corresponding elements separately.<br>
<br>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-M0KDFUPeANw/T_B5dpoTmwI/AAAAAAAAABU/u2nHrD2oC6I/s1600/figure.4.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_005.png" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><br>
Figure.4 Quantizer Matrix<br>
Each element of DCTed matrix is divided by <br>
the corresponding elements of this matrix.<br>
Lower <i>q</i>&nbsp;gives better picture quality.</td></tr>
</tbody></table>
<div class="separator" style="clear: both; text-align: left;">
<br></div>
Then, the elements of the matrix are reordered in so-called zig-zag 
ordering. (See Figure.3) To make use of lots of zeros and to decrease 
the data size, then the series of elements are encoded with Run Length 
Encoding and Huffman Coding. The detail of these decode process are 
explained well in Developer Guide so will not be explained here, but we 
point out some errors there.<br>
<br>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-ZvV7yB7y6ak/T_B9-mvM_SI/AAAAAAAAABg/BAuE8HdsTfQ/s1600/figure.5.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_007.png" border="0" height="271" width="400"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">P.49</td></tr>
</tbody></table>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;" cellpadding="0" cellspacing="0" align="center"><tbody>
<tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-T6e36L0i35g/T_CDM9DGrHI/AAAAAAAAAB0/j1f7yqanx9I/s1600/figure.6.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img style="display: inline-block;" class="" src="AR.Drone%20Development_fichiers/figure_004.png" border="0" height="400" width="367"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
P.51 - 52</div>
<div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">
The example stream is not consistent.</div>
</td></tr>
</tbody></table>
<br>
<div style="text-align: center;">
<br></div>
<div>
And it is worth pointing that the video data stream always start with 
non-zero 10-digit shortened 16 bits [2 bytes] signed integer. (That is 
"-57" in the example above.)<br>
<br>
Continue to <a href="http://ardrone-ailab-u-tokyo.blogspot.jp/2012/07/132-receive-and-decode-video-stream.html">Part.2</a></div></div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-07-01T17:02:00.002Z" itemprop="datePublished">1st July 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls delay" data-defer="true" data-delay="1000">
<span style="text-indent: 0px; margin: 0px; padding: 0px; background: none repeat scroll 0% 0% transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_6" class="share-plusone g-plusone" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/131-receive-and-decode-video-stream.html" data-size="medium" data-source="blogger:blog:plusone" data-annotation="bubble" data-width="90" data-text="1.3.1 Receive and Decode Video Stream Part.1: How the video is encoded"><iframe title="+1" data-gapiattached="true" allowtransparency="true" src="AR.Drone%20Development_fichiers/fastbutton_007.html" name="I6_1372664637085" id="I6_1372664637085" vspace="0" tabindex="0" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" marginwidth="0" marginheight="0" hspace="0" frameborder="0" scrolling="no" width="100%"></iframe></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/131-receive-and-decode-video-stream.html" data-count="" data-size="" data-text="1.3.1 Receive and Decode Video Stream Part.1: How the video is encoded"><iframe src="AR.Drone%20Development_fichiers/tweet_button_007.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>


<span class="share-facebook" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/07/131-receive-and-decode-video-stream.html" data-count="" data-layout="" data-text="1.3.1 Receive and Decode Video Stream Part.1: How the video is encoded"><iframe src="AR.Drone%20Development_fichiers/like_007.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="4943832487949859554">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=4943832487949859554" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="611046717938617790">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
    <meta itemprop="image_url" content="http://4.bp.blogspot.com/-GwZw9YwmUao/T9xIZXaljpI/AAAAAAAAAAM/A0JVAQOM28A/s1600/navdata1.png">
    <meta itemprop="thumbnailUrl" content="http://4.bp.blogspot.com/-GwZw9YwmUao/T9xIZXaljpI/AAAAAAAAAAM/A0JVAQOM28A/s1600/navdata1.png">
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="611046717938617790">

  
  <div class="article-header">


<a class="ribbon date " title="16th June 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/12-receive-navigation-data.html" itemprop="url">


  <div class="top ribbon-piece">Jun</div>
  <div class="bottom ribbon-piece">16</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/12-receive-navigation-data.html" rel="bookmark" itemprop="url">



1.2. Receive Navigation Data</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=611046717938617790&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody"><div style="text-align: justify;">
Once we can send commands to AR.Drone, we can receive data from AR.Drone
 and look into which part of the data corresponds to the actual state of
 AR.Drone. First, we look into navigation data, called <i>navdata</i>.</div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
AR.Drone へコマンドの送信ができれば、AR.Drone からデータを受信し、どの部分が実際の AR.Drone の状態に対応しているのか分け入ることができます。まず <i>navdata</i> と呼ばれる航行データから始めます。</div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
AR.Drone sends navdata via UDP port 5554. On the first access from 
client on this port, drone starts to send navdata in bootstrap mode. In 
this mode, only data sequence number and and drone's status are sent, so
 as to obtain sensor values such as yaw, pitch, roll angles, or 
altitude, we have to stop this mode by sending a character string like, <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sprintf(command, "AT*CONFIG=%d,\"general:navdata_demo\",\"TRUE\"\r",seq++);</span> to command port and drone will enter <i>Navdata</i> <i>demo</i>
 mode that is used by official iPhone app. Once this is done, drone will
 react to client's ack signal and continuously send navdata. This 
process is illustrated in SDK reference.</div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
AR.Drone は navdata UDP ポート 5554 番で送信します。クライアントからのアクセスがあると、 drone は 
navdata を bootstrap モードで送信し始めます。このモードで送られてくるデータはデータの番号と AR.Drone 
の状態のみで、角度計や高度センサーの値を取得するためには例えば次のようなコマンド<span style="font-family: &quot;Courier New&quot;,Courier,monospace;"> sprintf(command,"AT*CONFIG=%d,\"general:navdata_demo\",\"TRUE\"\r", seq++);</span> をコマンドポートに送信し、公式 iPhone アプリなどでも利用されている <i>Navdata demo</i> モードに drone を移行させます。この後 drone はクライアントの ack に反応して、navdata を送信し始めます。この流れは SDK のマニュアルに図で説明されています。</div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
The content of navdata is illustrated as Figure.1. The header is always 
0x55667788 and 32-bit integer that indicates the state of drone, navdata
 sequential number, and flag for tag detection. Drone's state is 
illustrated in Figure.2. (and more in detail in 
/ARDroneLib/Soft/Common/config.h of official SDK) Option blocks follow 
the header, and each option block commonly starts with option ID which 
indicates the type of content, and size of option block (probably in 
[byte]), and actual data of the option. In case of navdata_demo mode, 
the first option block contains ctrl_state (indicates such as landed, 
taking off etc.. see ARDroneLib/Soft/Common/control_states.h for its 
definition), battery voltage, pitch/roll/yaw angles, altitude, and 
estimated speed (in x, y and z direction). For other option blocks, 
please refer to ARDroneLib/Soft/Common/navdata_common.h of official SDK.</div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
<i>navdata</i> の内容は図.1のようになります。ヘッダーは常に 0x55667788 で, drone の状態を表す符号なし 32
 ビットの整数、navdata の番号、画像タグ検出のフラッグがあとに続きます。drone の状態の内訳は図.2のようになります。(SDK 内 
/ARDroneLib/Soft/Common/config.h に更に詳しい説明があります。)ここから続いて navdata 
のオプションブロックが始まります。それぞれのオプションはオプションを識別する ID, オプションブロックのサイズ 
(おそらく単位は[バイト])、オプションのデータになります。navdata_demo モードの場合 ( 図.3 ) はこのデータに drone 
の状態を表す ctrl_state (SDK&nbsp; 内 ARDroneLib/Soft/Common/control_states.h 
で定義されています。)、バッテリーの電圧、ピッチ・ロール・ヨー角、高度、推定速度（x, y, z 
方向）が格納されています。これら以外の詳しいオプションについては SDK の 
ARDroneLib/Soft/Common/navdata_common.h を参照してください。</div>
<div style="text-align: center;">
<br></div>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: left;" cellpadding="0" cellspacing="0"><tbody>
<tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-GwZw9YwmUao/T9xIZXaljpI/AAAAAAAAAAM/A0JVAQOM28A/s1600/navdata1.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://4.bp.blogspot.com/-GwZw9YwmUao/T9xIZXaljpI/AAAAAAAAAAM/A0JVAQOM28A/s1600/navdata1.png" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.1 navdata header and option blocks</td></tr>
</tbody></table>
<table class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: left;" cellpadding="0" cellspacing="0"><tbody>
<tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-ROukvAuRQNQ/T9xImKcOOYI/AAAAAAAAAAU/S5JB0aLEpqY/s1600/navdata2.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://3.bp.blogspot.com/-ROukvAuRQNQ/T9xImKcOOYI/AAAAAAAAAAU/S5JB0aLEpqY/s1600/navdata2.png" border="0"></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;">Figure.2 Drone's state indicator</td></tr>
</tbody></table>
<div style="text-align: center;">
<br></div>
<table class="tr-caption-container" style="margin-left: 0px; margin-right: 0px; text-align: left;" cellpadding="0" cellspacing="0"><tbody>
<tr align="center"><td><a href="http://4.bp.blogspot.com/-ZvOCBsJJ7rg/T9xImuR3KOI/AAAAAAAAAAc/twDpXzZaT5A/s1600/navdata3.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img class="deferred" src="data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="http://4.bp.blogspot.com/-ZvOCBsJJ7rg/T9xImuR3KOI/AAAAAAAAAAc/twDpXzZaT5A/s1600/navdata3.png" border="0"></a></td></tr>
<tr align="center"><td class="tr-caption">Figure.3 structure of navdata_demo</td></tr>
</tbody></table>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
If drone does not receive any signal more than 50 milliseconds, then <b style="font-family: &quot;Courier New&quot;,Courier,monospace;">ARDRONE_COM_WATCHDOG_MASK</b>
 bit is set. When the drone is in this mode, it does not accept any 
AT*PCMD command that is used to control drone by user devices but keep 
hovering on a fixed point. To quit this mode, the client must send 
AT*COMWDG command. Also, if drone did not receive any signal for more 
than 2000 milliseconds, then the drone stops all communication and set <b style="font-family: &quot;Courier New&quot;,Courier,monospace;">ARDRONE_COM_LOST_MASK</b> and the client has to reinitialize the communication.</div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
&nbsp;drone が 50 ミリ秒以上どのような信号も受信しなかった場合は drone の状態整数のうち <b style="font-family: &quot;Courier New&quot;,Courier,monospace;">ARDRONE_COM_WATCHDOG_MASK </b>ビッ
トが立てられます。この状態では drone はユーザーからの制御信号である AT*PCMD 
を受信しても実行せずにその場でホバリングし続けます。このモードを終了するためには、AT*COMWDG を送信して下さい。また、drone が 
2000 ミリ秒以上の間どのような信号も受信しなかった場合は全ての通信を終了し、<b style="font-family: &quot;Courier New&quot;,Courier,monospace;">ARDRONE_COM_LOST_MASK</b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"> ビットを</span>立て<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">ます。この</span>場合<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">クライアントは全ての通信プロセスを再度初期化しなければなりません。</span></div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
<br></div>
<div style="text-align: justify;">
The following code take off drone and turn right at the same place, and land while receiving and displaying navdata.</div>
<div style="text-align: left;">
<br></div>
<div style="text-align: left;">
<a href="https://docs.google.com/open?id=0B87Vcv-P5feSN3NyZVFXb3ZpZGs" rel="nofollow" target="_blank">here is a sample code</a></div>
<div style="text-align: justify;">
<br></div>
</div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-06-16T09:04:00.001Z" itemprop="datePublished">16th June 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/12-receive-navigation-data.html" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="1.2. Receive Navigation Data"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/12-receive-navigation-data.html" data-count="" data-size="" data-text="1.2. Receive Navigation Data"></span>


<span class="share-facebook defer" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/12-receive-navigation-data.html" data-count="" data-layout="" data-text="1.2. Receive Navigation Data"></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="611046717938617790">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=611046717938617790" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li><li class="item" data-id="8173930179688747275">
  
<div class="article hentry  " itemscope="" itemtype="http://schema.org/BlogPosting">
  
  
  <meta itemprop="blogId" content="8726168038760046377">
  <meta itemprop="postId" content="8173930179688747275">

  
  <div class="article-header">


<a class="ribbon date " title="15th June 2012" href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/send-command.html" itemprop="url">


  <div class="top ribbon-piece">Jun</div>
  <div class="bottom ribbon-piece">15</div>
  <div class="tail">
    <div class="left ribbon-piece"></div>
    <div class="right ribbon-piece"></div>
  </div>

</a>



<h1 class="title entry-title" itemprop="name">
  
  
  <a href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/send-command.html" rel="bookmark" itemprop="url">



1.1. Send Command</a>
  
  

<span class="blog-admin"><a class="edit" href="http://www.blogger.com/post-edit.g?blogID=8726168038760046377&amp;postID=8173930179688747275&amp;from=pencil" target="_self" title="Edit"></a></span>


</h1>
</div>
  <div class="article-content entry-content" itemprop="articleBody">AR.Drone
 is a good toy for UAV research, but the official SDK and sample codes 
are complicated and large potion of them are for Augmented Reality game 
which we do not need. So we decided to develop simple and light software
 for our research and we would like to share the development process 
with you. The codes that will be shared here is written by beginner 
programmer and also Linux newbie. So if you think of a better 
implementation, I am happy to hear that.<br>
<br>
AR.Drone は UAV の研究にとても便利ですが、公式の SDK とそのサンプルコードは複雑で、大部分の AR (Augmented 
Reality : 拡張現実) ゲームに関する部分は UAV 
の研究とは関係がありません。そこで私達はシンプルで軽い研究用のソフトウェアを開発することにし、その過程をこのブログで共有していきたいと思います。
ここで紹介する予定のプログラムはすべてプログラミング初心者かつ Linux 
初心者によって書かれているので、より効率のよい実装方法を思いついた方は教えていただけると光栄です。<br>
<br>
We start with establishing a communication with AR.Drone, so that we can
 control it or receive navigation data/video stream. After boot process,
 AR.Drone is ready to receive command on port 5556, to send navigation 
data on 5554, and to send video stream on 5555. So what we have to do is
 to create a socket and bind AR.Drone's IP address and port number and 
send/receive data using User Datagram Protocol (UDP). So we first create
 a socket and bind AR.Drone's address and a port and send command via 
UDP.<br>
<br>
まず、AR.Drone を操縦、航行データ／ビデオストリームを受信できるように AR.Drone 
との通信を確立することから始めます。ここでは、AR.Drone は起動後、ポート番号 5556 でコマンドの受信、5554 
で航行データの送信、5555 でビデオの送信を行います。ですから、ソケットを作成し、AR.Drone の IP 
アドレス、ポート番号をバインドして、UDP プロトコルでデータの送受信を行います。<br>
<br>
<span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#include &lt;stdlib.h&gt;</span><br>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
#include &lt;netdb.h&gt;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
#include &lt;stdio.h&gt;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
#include &lt;string.h&gt;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
#define DRONE_COMMAND_PORT 5556</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
#define MAX_MSG 1024</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
int main(int argc, char *argv[]) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // declare variables</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; int&nbsp;&nbsp;&nbsp; sd, rc, flags;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; char&nbsp;&nbsp; command[MAX_MSG];&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; struct sockaddr_in clientAddr;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; struct sockaddr_in droneAddr;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; struct hostent&nbsp;&nbsp;&nbsp;&nbsp; *h;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; struct timespec&nbsp;&nbsp;&nbsp; wait_command;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; FILE *fr;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // initialize variables</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; flags = 0;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; wait_command.tv_sec&nbsp; = 0;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; wait_command.tv_nsec = 5000000;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // check command line arguments </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; if(argc&lt;3) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; printf("usage : %s &lt;server name/IP&gt; &lt;filename of command list&gt; \n", argv[0]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; exit(EXIT_FAILURE);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // get server IP address (no check if input is IP address or DNS name)</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; h = gethostbyname(argv[1]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; if(h==NULL) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; printf("%s: unknown host '%s' \n", argv[0], argv[1]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; exit(EXIT_FAILURE);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // create structure for ardrone address &amp; port</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; droneAddr.sin_family = h-&gt;h_addrtype;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; droneAddr.sin_port&nbsp;&nbsp; = htons(DRONE_COMMAND_PORT);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; memcpy((char *) &amp;droneAddr.sin_addr.s_addr, h-&gt;h_addr_list[0], h-&gt;h_length);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // create structure for this client</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; clientAddr.sin_family = AF_INET;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; clientAddr.sin_addr.s_addr = htonl(INADDR_ANY);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; clientAddr.sin_port = htons(0);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // socket creation</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; sd = socket(AF_INET,SOCK_DGRAM,0);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; if(sd&lt;0) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; printf("%s: cannot open socket \n",argv[0]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; exit(EXIT_FAILURE);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // bind client's the port and address</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; rc = bind(sd, (struct sockaddr *) &amp;clientAddr, sizeof(clientAddr));</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; if(rc&lt;0) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; printf("%s: cannot bind port\n", argv[0]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; exit(EXIT_FAILURE);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // read command from text</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; printf("%s: read command from %s \n",argv[0],argv[2]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; if ((fr = fopen (argv[2], "r")) == NULL) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; printf("file open error.\n");</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; exit(EXIT_FAILURE);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; // send commands</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; printf("%s: sending commands to&nbsp; %d\n", argv[0], inet_ntoa(*(struct in_addr *)h-&gt;h_addr_list[0]));</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; while(fgets(command, sizeof(command), fr) != NULL)</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; { </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; &nbsp;command[strlen(command)-1] = 0x0d;&nbsp; // change last character from new line to carriage return</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp; &nbsp;printf("%s: %s\n",argv[0],command);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp; rc = sendto(sd, command, strlen(command)+1, 
flags,&nbsp; (struct sockaddr *) &amp;droneAddr, sizeof(droneAddr));</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp; if(rc&lt;0) {</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; printf("%s: can not send data\n",argv[0]);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; close(sd);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit(EXIT_FAILURE);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp;&nbsp;&nbsp;&nbsp; nanosleep(&amp;wait_command , NULL);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; }</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; fclose(fr);</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; </div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
&nbsp; return 1;</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
</div>
<div style="font-family: &quot;Courier New&quot;,Courier,monospace;">
}</div>
<br>
<br>
The sample program takes two command line arguments, an IP address of 
AR.Drone and a text file with bunch of commands. The default IP address 
is 192.168.1.1 and a sample command file is attached in this page. 
Compile this code with lines such as <i style="font-family: inherit;">gcc -o testDrone_command testDrone_command.c</i> and execute with <i>./testDrone_command 192.168.1.1 takeoff_land.txt</i>.
 Drone will start to rotate its propellers, but will stop before 
actually taking off. Note that this code was developed on Ubuntu 10.04 
and we tested this code only on AR.Drone with firmware version 1.6.6 and
 1.7.6. Since they do not sell AR.Drone2 in Japan yet, so we have not 
tested with AR.Drone2. Many people, however, reported their software 
works with AR.Drone2 without modification except video stream, so it 
should work with AR.Drone2 also.<br>
<br>
<br>
このサンプルプログラムは AR.Drone の IP アドレスと一連のコマンドを記したテキストファイルの名前の２つのコマンドライン引数を取ります。コマンドリストの一例をこのページに添付します。デフォルトの IP アドレスは 192.168.1.1 です。<i>gcc -o testDrone_command testDrone_command.c</i> 等でコンパイルして、<i>./testDrone_command 192.168.1.1 takeoff_land.txt</i>
 等と実行してください。AR.Drone はプロペラを回転させますが、実際に離陸する前に停止します。注意としてこのコードは Ubuntu 
10.04 で開発され AR.Drone ファームウェアバージョン 1.6.6 と 1.7.6 で動作確認を行いました。AR.Drone2 
は日本ではまだ販売されていないのでそちらでのテストは行なっていません。しかしながら、これまでのソフトウェアであってもビデオのデコード以外は改変な
しに AR.Drone2 でもそのまま使えるという報告が多数あるのでおそらく動くでしょう。<br>
<br>
<a href="https://docs.google.com/open?id=0BzZCYKEBtC4lYklqZi0wOUdIZUE" rel="nofollow" target="_blank">testDrone_command.tar.gz</a></div>
  <div class="article-footer">
    
<div class="publish-info">
  
    Posted <abbr class="time published" title="2012-06-15T14:45:00.000Z" itemprop="datePublished">15th June 2012</abbr> by <a class="url fn" href="http://www.blogger.com/profile/17341325352620249126" rel="author" itemprop="author">ailab</a>
  
  
</div>

    


    
    
    
<div class="share-controls defer delay" data-defer="true" data-delay="1000">
<span class="share-plusone g-plusone defer" data-href="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/send-command.html" data-size="" data-source="blogger:blog:plusone" data-annotation="" data-width="90" data-text="1.1. Send Command"></span>

<span data-href="http://twitter.com/share" class="share-twitter twitter-share-button defer" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/send-command.html" data-count="" data-size="" data-text="1.1. Send Command"></span>


<span class="share-facebook defer" data-url="http://ardrone-ailab-u-tokyo.blogspot.com/2012/06/send-command.html" data-count="" data-layout="" data-text="1.1. Send Command"></span>

</div>

    
  </div>

  
  
    
    
<div class="comments" data-defer="view">
  <div class="comments-header toggle-switch">
    
<span class="bubble  comments-count " title="0 comments">
  <span class="bubble-content">0</span>
  <span class="bubble-tail"></span>
</span>

    <h3>
    
    Add a comment
    </h3>
  </div>
  
<div style="display: none;" class="comments-wrapper blogger-comments toggle-container toggle-active" data-itemid="8173930179688747275">
  <div class="comments-content"></div>
  <div class="comments-footer">
    <iframe class="comments-replybox" data-src="//www.blogger.com/comment-iframe.g?blogID=8726168038760046377&amp;postID=8173930179688747275" frameborder="0"></iframe>
  </div>
</div>

</div>

    
    
  
  

  
</div>

  
</li></ol>
</div>


<div id="gadget-dock" class=""><div class="gadget-item" data-gadget-id="0">
<div class="gadget-menu">
    <div class="gadget-icons">
      <img class="gadget-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEX///8AAAD///9+749PAAAAAnRSTlMAAHaTzTgAAAAwSURBVHherYyxCQAwCAR/yhTZy8ZeC6c0BETU1msOjucBeyBF54s1FHEs5fZYWb12TL8307RAxVQAAAAASUVORK5CYII=">
      <img class="gadget-icon-selected" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAACVBMVEX///8AAAAzMzMTx/ayAAAAAnRSTlMAAHaTzTgAAAAwSURBVHherYyxCQAwCAR/yhTZy8ZeC6c0BFS09pqD43nAHijR+WINZZxLuTN2Vq8dTL8301DjA9oAAAAASUVORK5CYII=">
    </div>
    <span class="gadget-title">Blog Archive</span>
  </div>
  <div class="gadget-container">
    <div class="gadget">
      <span class="gadget-title">Blog Archive</span>
      <div class="gadget-content"><div class="blogarchive-tree blogarchive-expanded">
  <ul class="blogarchive-dates">
  
  
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/search?updated-min=2012-01-01T00:00:00-08:00&amp;updated-max=2013-01-01T00:00:00-08:00&amp;max-results=9">2012</a><span class="blogarchive-post-count">9</span>
  </div>
  <ul class="blogarchive-dates">
  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/2012_11_01_archive.html">November</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  

  
<li class="blogarchive-post">
  <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/2012/11/opencv-levmarqsparse-class-for-sparse_13.html">OpenCV LevMarqSparse class for Sparse Bundle Adjus...</a>
</li>


  
<li class="blogarchive-post">
  <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/2012/11/3-integration.html">3. Integration</a>
</li>



  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/2012_07_01_archive.html">July</a><span class="blogarchive-post-count">5</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
    
<li class="blogarchive-date blogarchive-collapsed">
  <div class="blogarchive-title">
    <a href="http://ardrone-ailab-u-tokyo.blogspot.fr/2012_06_01_archive.html">June</a><span class="blogarchive-post-count">2</span>
  </div>
  <ul class="blogarchive-dates">
  
  


  </ul>
</li>

  
  


  </ul>
</li>

  
  </ul>
</div></div>
    </div>
  </div></div><div class="gadget-item" data-gadget-id="1">
<div class="gadget-menu">
    <div class="gadget-icons">
      <img class="gadget-icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAB40lEQVRIx7XWwWoTURQG4Lst0jTiolRa2qW4sAWhbrsTBJ8h2bpKNkUUBKGL2idQfIgGuhNsLW7UTaiPYTFpN92Y1s/NmTSEzGSmpj8MAzPnP//cc/97zqRUACyggX30cIlB3C/j2X7E1HJyJBSKtNGPZJ/wAg8xh3lsYhtHEdNDq7QQVnGCP3iJO2kKsIId/AruaqEQ1mMVh7iXKgJL6OIM6xOFYiV9fMTddENgEQchtjpJqIvDNAPEPn6PnNdCIxv/oIBcx7FrHKNeEL+B32hhaOE+3kz5ylGRodgUzl64sZbQxMU0d8lHfYobL9BI6OBribpXFgreZ3RSuONVCaHKpQvea/QT/uJJCUIlM4zwnuIqE6pVsG69jMDYubrKaj+fbglYzoQusVkQuIa30cPGcRLv1gr4zzOhHrZzgpo4Nx3naObk2M3MsI+jipYubXV8y+zdiM6wMgOhrQlGGKCZUIvy7dyC0Ic4pwvZgxZOsTQWuFXxqo9wH8fwbI+PiZNo64szsPT92Jtu0eA7wNx/inzJ9r1olJ/hJzZuIPIoWlP+KB9bWTeG1t4kN+a0mffhsO4op8zvVivceIEfeIdnkXQ5TvxujOxBHNp25f+6CKrFOetEza/Grn68aw4tnCP0D7HegqWQsg0fAAAAAElFTkSuQmCC">
      <img class="gadget-icon-selected" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAB8klEQVRIx7XWT0uUURTH8buVcJxoIYaiy2iRwgds6y4Ieg3OttW4kSgIAhfmKyh6ETPgLkiTNtVmsJeR5OjGTWpPm/MM0zjz/DE9cHng3nPO93nu/d1znpQKDDNYRwfHuMB5PC9irhM+jXE5sixLWZYVQjbQj2Qf8RwPMYVprGIT++FzjHZlEBZxiN94gTupxLCALfyM2MVCEJbjK/ZwL9U0zKGHEyzH3L+g+JI+PuBuuqZhFrsBWxwH6mEv3YDFOX6LnAlXDv5BQXATB8hiHKBZ4L+CX2hjIOE+Xpe85TBkACuJ2Qk1NhJaOCtT1xhIPpolajzDekIXXyrse21QxH1CN4U6XlYA1d66iHuFfsIfPK4QUEsMQ3FPcJmDGjWk26wCGLlXl/neT6dbMsznoAusFjgu4U3UsNEzOoy1pYL4ZznoGJsTnFo4LVBcPk7RmpBjOxdDB/s1JV1Z6viay3s9KsPCDYDWxgjhHK2ERmzf1i2A3sc9nckn2jjC3IjjWs3RHIoVzXNjUL1j4TDK+uwNSPp+nE2vqPHtYuo/IZ/zc78CGmrlJ/iBlWtAHkVpGrTysp+TXjStnXFqnFBm3oXCesMxVX632qHGM3zHWzyNpPNx47ejZZ/Hpd0YzVMKClgj7lk39vxyZPRjrTWQ8ATQX2/rqVTnkWAqAAAAAElFTkSuQmCC">
    </div>
    <span class="gadget-title">Contributors</span>
  </div>
  <div class="gadget-container">
    <div class="gadget">
      <span class="gadget-title">Contributors</span>
      <div class="gadget-content"><div class="profile">
  
    
      
<ul class="profile-data-list">
  
  <li><a href="http://www.blogger.com/profile/17341325352620249126" class="profile-name-link g-profile" style="background-image: url('//www.blogger.com/img/logo-16.png');">ailab</a></li>
  
  <li><a href="http://www.blogger.com/profile/02615078735457265297" class="profile-name-link g-profile" style="background-image: url('//www.blogger.com/img/logo-16.png');">mthrok</a></li>
  
</ul>

    
    
  
</div></div>
    </div>
  </div></div></div>



<div id="loading">
  <span>Loading</span>
</div>








<a href="http://www.google.com/support/forum/p/blogger" class="feedback" tabindex="0" onclick="
try{
  userfeedback.api.startFeedback({
    productId: '74',
    locale: 'en'
  });
  return false;
}catch(e){}">Send feedback</a><script gapi_processed="true" defer="defer" async="" src="AR.Drone%20Development_fichiers/api.js" type="text/javascript"></script></body></html>